{"config": {"indexing": "full", "lang": ["en"], "min_search_length": 3, "prebuild_index": false, "separator": "[\\s\\-]+"}, "docs": [{"location": "", "text": "My name is Milan Hronsk\u00fd I work on better integration of renewable energy in the grid . A common problem of renewable energy is its intermittency . The fossile and nuclear energy in the grid will remain high, unless the time course of renewable power is effectively smoothed. Trying to increase the share of renewable energy in the grid by technical means. My photovoltaic projects: PV Logger PV Smoothing You can contact me via LinkedIn", "title": "About me"}, {"location": "MkDocs/", "text": "Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs gh-deploy - Deploy the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.", "title": "Welcome to MkDocs"}, {"location": "MkDocs/#welcome-to-mkdocs", "text": "For full documentation visit mkdocs.org .", "title": "Welcome to MkDocs"}, {"location": "MkDocs/#commands", "text": "mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs gh-deploy - Deploy the documentation site. mkdocs -h - Print help message and exit.", "title": "Commands"}, {"location": "MkDocs/#project-layout", "text": "mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.", "title": "Project layout"}, {"location": "pv_intermit/", "text": "Photovoltaic intermittency Impact on the grid Moving clouds cause that the photovoltaic power is unstable over time. As the share of PV power grows in the grid, its fluctuations pose an increasing risk to the power quality and grid stability. To mitigate this risk, the grid operator sets PV generators off-grid (or at least to a low-efficiency mode) while the solar intermittency is strong. Such losses of PV energy were e.g. 7% in 2011 in the US state Arizona. The loss-rate is determined by the solar intermittency and by the installed PV power in the grid: The larger PV share, the higher relative(!) losses of PV energy due to its intermittency. Extra grid-control costs exist due to the PV intermittency. This overall impact has been projected to the last guaranteed feed-in tariff for new PV installations in Germany: In 2020, the feed-in tariff for a newly installed small PV plant was only about 1/3 of the purchase tariff. The state guarantee has been canceled as of 2021, and there is no more doubt that only technical innovations can further augment the PV share in the grid: Smoothing of PV power could eliminate the losses of PV energy and the costs of additional grid control. A smooth time course of renewable power can be easily complemented by other resources (e.g. gas- and water turbines), which is impossible with the rapidly-changing renewable power. Losless smoothing of PV power Energy balancing between the grid and a battery may smooth the fluctuating intermittent PV power almost loss-free. The disadvantage of lossless PV smoothing is that it takes up expensive storage capacity. There have been several smoothing algorithms published, accumulating less energy than the basic application of a low-pass power filter (LPF) does. Actually, these smoothing methods still accumulate too much energy which prevents them from being commercially viable. The first goal was to analyze an ideal PV smoothing model (IPLPF), accumulating the minimum energy in theory by exciting LPF with an exact future PV power signal. Based on the solar radiation data measured over a time span of 1 year, the operation of the ideal smoothing model was numerically simulated. Its accumulated energy and corresponding cost have been aggregated. Given a reference LPF, the accumulation rate of IPLPF may serve as a reference quantifier of the solar intermittency, while the corresponding accumulation cost indicates the potential affordability of PV smoothing. The ideal smoothing has proven to be highly affordable with the German purchase and PV feed-in tariffs as of 2021. Next, the smoothing model has been theoretically optimied (SPLPF) to minimize the necessary storage when the predicted PV power signal is biased with error (prediction error increases the accumulation rate). Given the measured solar data, the accumulated energy of the SPLPF model has been aggregated, using a variable prediction error. With low to medium prediction error, the optimized model performs close to the ideal smoothing, much better than the LPF excited with the same predicted signal does. Our numeric simulation justified the theoretical presumption that the optimized smoothing model SPLPF will be commercially viable, using a real-predicted PV power.", "title": "Photovoltaic intermitency"}, {"location": "pv_intermit/#photovoltaic-intermittency", "text": "Impact on the grid Moving clouds cause that the photovoltaic power is unstable over time. As the share of PV power grows in the grid, its fluctuations pose an increasing risk to the power quality and grid stability. To mitigate this risk, the grid operator sets PV generators off-grid (or at least to a low-efficiency mode) while the solar intermittency is strong. Such losses of PV energy were e.g. 7% in 2011 in the US state Arizona. The loss-rate is determined by the solar intermittency and by the installed PV power in the grid: The larger PV share, the higher relative(!) losses of PV energy due to its intermittency. Extra grid-control costs exist due to the PV intermittency. This overall impact has been projected to the last guaranteed feed-in tariff for new PV installations in Germany: In 2020, the feed-in tariff for a newly installed small PV plant was only about 1/3 of the purchase tariff. The state guarantee has been canceled as of 2021, and there is no more doubt that only technical innovations can further augment the PV share in the grid: Smoothing of PV power could eliminate the losses of PV energy and the costs of additional grid control. A smooth time course of renewable power can be easily complemented by other resources (e.g. gas- and water turbines), which is impossible with the rapidly-changing renewable power.", "title": "Photovoltaic intermittency"}, {"location": "pv_intermit/#losless-smoothing-of-pv-power", "text": "Energy balancing between the grid and a battery may smooth the fluctuating intermittent PV power almost loss-free. The disadvantage of lossless PV smoothing is that it takes up expensive storage capacity. There have been several smoothing algorithms published, accumulating less energy than the basic application of a low-pass power filter (LPF) does. Actually, these smoothing methods still accumulate too much energy which prevents them from being commercially viable. The first goal was to analyze an ideal PV smoothing model (IPLPF), accumulating the minimum energy in theory by exciting LPF with an exact future PV power signal. Based on the solar radiation data measured over a time span of 1 year, the operation of the ideal smoothing model was numerically simulated. Its accumulated energy and corresponding cost have been aggregated. Given a reference LPF, the accumulation rate of IPLPF may serve as a reference quantifier of the solar intermittency, while the corresponding accumulation cost indicates the potential affordability of PV smoothing. The ideal smoothing has proven to be highly affordable with the German purchase and PV feed-in tariffs as of 2021. Next, the smoothing model has been theoretically optimied (SPLPF) to minimize the necessary storage when the predicted PV power signal is biased with error (prediction error increases the accumulation rate). Given the measured solar data, the accumulated energy of the SPLPF model has been aggregated, using a variable prediction error. With low to medium prediction error, the optimized model performs close to the ideal smoothing, much better than the LPF excited with the same predicted signal does. Our numeric simulation justified the theoretical presumption that the optimized smoothing model SPLPF will be commercially viable, using a real-predicted PV power.", "title": "Losless smoothing of PV power"}, {"location": "pv_log/", "text": "Measurement of global irradiance Accurate measurement of global irradiance (GI) is a prerequisite for the analysis of PV smoothing: Accurate short-term forecasting (nowcasting) of PV power is crucial when minimizing the accumulated energy by the PV power smoothing. PV power predictors are based on artificial intelligence (AI) and they can be trained by a sky-imagery and by the measured signal GI(t), in particular its fraction intercepted by a tilted PV panel. Having the measured time series GI(t), a low-pass filter can be ex-post excited by a \"predicted\" input signal GI f (t+\u0394t). That is, the measured signal is shifted to the left on its time axis and its values are biased with a simulated prediction error. Given the simulated-predicted PV power signal and having LPF tuned to meet the given ramping limit of PV power, the accumulated energy by the filter should be minimized by technical means to minimize the smoothing cost. However low is the accumulated energy, the smoothing is not for free and it pays-off only with a favourable \"smooth feed-in tariff\" granted to those prosumers who meet the given PV ramping limits. The goal is to keep the sum \"grid control costs\" plus \"PV power losses due to curtailment\" plus \"PV smoothing costs\" at minimum. Having the PV ramping limit and the measured signal GI(t) over a time span of 1+ year and its prediction error, the accumulation rate hence the smoothing cost can be aggregated. The minimum criterion can be eventually iterated unless the PV ramping limit is optimized. Measurement of solar irradiance for the analysis of PV smoothing should meet folloowing demands: Capture the full spectrum of solar intermittency by a sufficiently high sampling frequency Measure the fraction of irradiance which is intercepted by a tilted plane of incidence (PV panel). Respect the physical properties of planar silicon PV panels (reflexion and spectral response) For general purposes, the momentary solar irradiance has to be measured at any plane of incidence under given atmospheric conditions. Fulfilling all of these demands is not possible only by measuring the global (GHI) and diffused (dHI) horizontal irradiance (both of which are regularly measured by the national weather services). A corresponding measurement system with data logger has been developed by the author and is in operation since 04/2021 at (48.2\u00b0, 17.1\u00b0). The system consists of 2 units: external console carrying 4 reference PV panels mounted in different angles, and temperature sensors of PV panels, internal measurement unit, serving as MPPT controller, battery charger, heat sink, A/D converter, and data logger. System features The reference monocrystaline silicon PV panels (sensors) have been calibrated by means of Ineichen\u2019s clear-sky model , having its Linke-turbidity factor calibrated by the reference GHI, dHI measured at the near meteorological site. The PV panels are re-calibrated once a year. Temperature sensors are fixed onto each PV panel. The panels are always operated at the maximum output power (MPPT) . Their operating point is being dynamically adjusted for the temperature drift of their A-V characteristics and for their internal resistance. The measured output power of each panel is divided by its active surface area and by its (known) efficiency at the measured surface temperature. The measurement is eventually expressed as \"photovoltaic global irradiance\" in W/m2 analogous to GI measured at given angle of the plane of incidence, but taking into account the reflexion and spectral response of PV panels. Data logger samples GI with a dynamic frequency. The sampling period varies from 0.5 second to 10 minutes, depending on the momentary solar intermittency. This captures the whole spectrum of solar intermittency, but eliminates the redundancy in stored data. Several years of such an irregular time series can be stored in a relational database with tablespace <1TB. The off-grid measurement system is self-powered 24 hours x 7 days a week. In addition to measurement, the PV sensors supply power to the data logger and charge its backup accumulator. The system requires a minimum maintenance. Simultaneous measurement of GI in 4 fixed normal angles allows an accurate interpolation of GI at any plane of incidence pointing its normal vector among the fixed normal vectors (intra-normal area). Daily (12 h) profiles of photovoltaic GI [W/m2] measured at 4 fixed planes. GHI corresponds to the horizontal plane while extrapolated GNI corresponds to a virtual solar-tracked plane of incidence. Its normal vector points to the extra-normal area in winter when the solar elevation is lower than the elevation of the four fixed normal vectors. The approximated GNI is therefore less accurate in winter. Daily (24 h) temperature profiles at PV surfaces, and the ambient temperature. The PV surface's temperature is affected by the ambient temperature, solar radiation, and by wind. Since ambient temperature is higher than sky temperature, the PV panels are always cooled by their own radiation. This effect can be observed in the night when the panels are not exposed to the solar radiation.", "title": "PV Logger"}, {"location": "pv_log/#measurement-of-global-irradiance", "text": "Accurate measurement of global irradiance (GI) is a prerequisite for the analysis of PV smoothing: Accurate short-term forecasting (nowcasting) of PV power is crucial when minimizing the accumulated energy by the PV power smoothing. PV power predictors are based on artificial intelligence (AI) and they can be trained by a sky-imagery and by the measured signal GI(t), in particular its fraction intercepted by a tilted PV panel. Having the measured time series GI(t), a low-pass filter can be ex-post excited by a \"predicted\" input signal GI f (t+\u0394t). That is, the measured signal is shifted to the left on its time axis and its values are biased with a simulated prediction error. Given the simulated-predicted PV power signal and having LPF tuned to meet the given ramping limit of PV power, the accumulated energy by the filter should be minimized by technical means to minimize the smoothing cost. However low is the accumulated energy, the smoothing is not for free and it pays-off only with a favourable \"smooth feed-in tariff\" granted to those prosumers who meet the given PV ramping limits. The goal is to keep the sum \"grid control costs\" plus \"PV power losses due to curtailment\" plus \"PV smoothing costs\" at minimum. Having the PV ramping limit and the measured signal GI(t) over a time span of 1+ year and its prediction error, the accumulation rate hence the smoothing cost can be aggregated. The minimum criterion can be eventually iterated unless the PV ramping limit is optimized. Measurement of solar irradiance for the analysis of PV smoothing should meet folloowing demands: Capture the full spectrum of solar intermittency by a sufficiently high sampling frequency Measure the fraction of irradiance which is intercepted by a tilted plane of incidence (PV panel). Respect the physical properties of planar silicon PV panels (reflexion and spectral response) For general purposes, the momentary solar irradiance has to be measured at any plane of incidence under given atmospheric conditions. Fulfilling all of these demands is not possible only by measuring the global (GHI) and diffused (dHI) horizontal irradiance (both of which are regularly measured by the national weather services). A corresponding measurement system with data logger has been developed by the author and is in operation since 04/2021 at (48.2\u00b0, 17.1\u00b0). The system consists of 2 units: external console carrying 4 reference PV panels mounted in different angles, and temperature sensors of PV panels, internal measurement unit, serving as MPPT controller, battery charger, heat sink, A/D converter, and data logger.", "title": "Measurement of global irradiance"}, {"location": "pv_log/#system-features", "text": "The reference monocrystaline silicon PV panels (sensors) have been calibrated by means of Ineichen\u2019s clear-sky model , having its Linke-turbidity factor calibrated by the reference GHI, dHI measured at the near meteorological site. The PV panels are re-calibrated once a year. Temperature sensors are fixed onto each PV panel. The panels are always operated at the maximum output power (MPPT) . Their operating point is being dynamically adjusted for the temperature drift of their A-V characteristics and for their internal resistance. The measured output power of each panel is divided by its active surface area and by its (known) efficiency at the measured surface temperature. The measurement is eventually expressed as \"photovoltaic global irradiance\" in W/m2 analogous to GI measured at given angle of the plane of incidence, but taking into account the reflexion and spectral response of PV panels. Data logger samples GI with a dynamic frequency. The sampling period varies from 0.5 second to 10 minutes, depending on the momentary solar intermittency. This captures the whole spectrum of solar intermittency, but eliminates the redundancy in stored data. Several years of such an irregular time series can be stored in a relational database with tablespace <1TB. The off-grid measurement system is self-powered 24 hours x 7 days a week. In addition to measurement, the PV sensors supply power to the data logger and charge its backup accumulator. The system requires a minimum maintenance. Simultaneous measurement of GI in 4 fixed normal angles allows an accurate interpolation of GI at any plane of incidence pointing its normal vector among the fixed normal vectors (intra-normal area). Daily (12 h) profiles of photovoltaic GI [W/m2] measured at 4 fixed planes. GHI corresponds to the horizontal plane while extrapolated GNI corresponds to a virtual solar-tracked plane of incidence. Its normal vector points to the extra-normal area in winter when the solar elevation is lower than the elevation of the four fixed normal vectors. The approximated GNI is therefore less accurate in winter. Daily (24 h) temperature profiles at PV surfaces, and the ambient temperature. The PV surface's temperature is affected by the ambient temperature, solar radiation, and by wind. Since ambient temperature is higher than sky temperature, the PV panels are always cooled by their own radiation. This effect can be observed in the night when the panels are not exposed to the solar radiation.", "title": "System features"}, {"location": "pv_smooth/", "text": "Smoothing of intermittent PV power The objective of PV smoothing is to meet the given ramping limits of PV power, while accumulating the minimum possible energy by smoothing. If the smooth PV power is generated by a low-pass filter (LPF) excited by the output power of PV panels, then such a power filter induces high accumulation costs due to its time lag (group delay in its frequency response). The higher LPF order or its lower cut-off frequency, the smoother output but the greater group delay. The time lag could be eliminated in theory, if the LPF was excited by a future PV power signal. Unfortunately, the the time course of PV power is random and its short-time prediction (nowcasting) is not exact and its error considerably increases the accumulated energy by LPF. Recently, various predictive filters e.g. zero group-delay filter , Kalman filter have been developed to avoid the accumulation of PV energy due to the time lag of LPF. Advantage of predictive filters is that they integrate the predictor and LPF into a same functional entity, potentially accumulating less energy than a standard LPF excited by a predicted PV power does. But the self-predicted filters are trained only by information carried by the measured power signal p(t), lacking the information from sky imagery. As a result, the accumulation cost induced by predictive filters still exceeds the production costs of fossil and nuclear electricity (assuming current social cost of CO 2 and nuclear waste). Our analysis will be therefore focused on the application of LPF excited by PV predictor trained by both sky imagery and p(t) signals. We further integrate the two into one entity, utilizing the theoretical advantage of predictive filters. Figure 1: Smoothing of PV power by a low-pass filter In the schematic diagram on Figure 1, a PV power plant (PVPP) is connected to the grid and its intermittent power p(t) is accumulated or compensated (i.e. smoothed) by an accumulator (ESS). The smoothing power is actuated by a bidirectional inverter AC/DC. The smoothing power is determined by the ouput signal p(t)-s(t+\u0394t) of a differencer. Positive sign of the smoothing power is oriented from the grid to ESS. Hence the total power superimposed to the grid by PVPP and ESS is determined by the filter\u2019s output signal s(t+\u0394t). For the simplification, PVPP and ESS are single-phase-connected to the grid. 4 different smoothing methods will be further analysed: In case of LPF smoothing, the measured signal p(t) bypasses the predictor, directly exciting LPF. In theory, an ideal predictive smoothing IPLPF excites LPF by the exact future PV power signal p(t+\u0394t) where the time advance \u0394t is absolutely equal to the LPF's group delay at frequencies f<<f c where f c is the cut-off frequency of LPF. The smooth power signal s(t+\u0394t) is the response of LPF to the input signal p(t+\u0394t). According to the schematic diagram, a PLPF smoothing method excites the LPF by a predicted PV power signal p f (t+\u0394t), approximating the signal p(t+\u0394t). The predictor is trained by the sky-imagery signal and by the measured PV power p(t). Eventually, a smart smoothing method SPLPF (patent pending) has been designed, integrating the LPF with the PV predictor trained by both the sky-imagery and the measured PV power p(t). This method uses a modified scheme. Accumulation of energy by smoothing For simplicity of analysis, energy losses in AC/DC conversion and accumulation will be neglected. Time course of the accumulated energy by ESS: $$SOC(t)=\\int_{0}^t (p(\\tau)-s(\\tau+\\Delta t))d\\tau\\tag{1}\\label{eq:1}$$ defines the change in the state-of-charge [Wh] since time=0 until time=t, while SOC may acquire both positive and negative values. (Always-positive SOC values in ESS can be technically managed.) The time advance \u0394t reduces absolute values of the integrated function. The IPLPF-defined signal s(\u03c4+\u0394t) ensures that following 4 technical criteria are satisfied: Mean value of SOC is near to zero: $${1 \\over T} \\int_{0}^T SOC (t) dt \u2248 0\\tag{2}\\label{eq:2}$$ Mean quadratic deviation of SOC is near to minimum: $${1 \\over T} \\int_{0}^T SOC^2 (t) dt \u2248 min\\tag{3}\\label{eq:3}$$ Hence the required storage capacity per cycle T (24 hours in case of PV power p(t)) is close to minimum: $$\\Delta SOC = max(SOC) \u2013 min(SOC) \u2248 min\\tag{4}\\label{eq:4}$$ At the begining of each cycle, the value min(SOC) should be predicted and ESS must be accordingly pre-charged to -min(SOC) in order to keep SOC\u22650 during the whole cycle. Eventually, near-to-minimum throughput of accumulated energy per cycle is achieved by IPLPF: $${1 \\over 2} \\int_{0}^T|p(\\tau)-s(\\tau+\\Delta t)|d \\tau \u2248 min\\tag{5}\\label{eq:5}$$ The accumulation rate is expressed by \\eqref{eq:4} and \\eqref{eq:5}, and by the demanded power from/to ESS during a sudden loss or a peak of direct sunlight: $$P_{ESS}=max|p(\\tau)-s(\\tau+\\Delta t)|\\tag{6}\\label{eq:6}$$ In practise, its maximum value does not exceed 80% of the installed PV power. Let us expect that the PV power p(t) is proportional to the global solar irradiance GI [W/m 2 ]. In our experiment, the solar irradiance is intercepted by a planar panel 20 cm x 16 cm on the earth\u2019s surface at latitude=48.2\u00b0N, longitude=17.1\u00b0E, with the plane of incidence elevated by 47\u00b0, south-oriented. To be exact, it should be mentioned that p(t) is usually smoother than GI(t), as the (usually greater) surface area of the corresponding PV plane acts like a moving-average filter of GI(t). Unfortunately, the size and speed of clouds prevent a sufficient smoothing effect from being achieved by the PV surface area. Assuming the proportionality between GI(t) and p(t), we analyze the worst case of PV intermittency. Let us now substitute the signals p(\u03c4), s(\u03c4+\u0394t) in \\eqref{eq:1}, \\eqref{eq:5}, \\eqref{eq:6} by the measured signal GI(\u03c4) and by its \u201cpredicted-and-smoothed\u201d counterpart GI s (\u03c4+\u0394t). After substituting, the intergal \\eqref{eq:1} computes the time course of specific accumulated energy GX(t) [Wh/m 2 ] by the filter, whereas SOC(t) is proportional to GX(t). The integral \\eqref{eq:5} computes the specific accumulated throughput [Wh/m 2 ] per cycle T. Ideal predictive smoothing (IPLPF) We simulate the operation of ideal predictive PV smoothing (IPLPF) by means of a LPF, ex-post excited by a future signal GI(t+\u0394t) where GI(t) is measured and the time advance \u0394t (above defined) eliminates the filter\u2019s time lag. In theory, such an ideal smoothing would minimize the accumulated energy for the given ramping limit. This analysis aims to reveal the potential affordability of PV smoothing, assuming that a real smoothing technology exists, performing close to IPLPF. The numeric experiment is based on the measured solar irradiance over a period of 1 year, and the contemporary prices of LiFePO4 accumulators. Accumulation rate The measured signal GI(t) and applied LPF allows for the aggregation of specific ESS parameters requested by the IPLPF smoothing: maximum specific power GI ESS =max|GI(\u03c4)-GI s (\u03c4+\u0394t)| by \\eqref{eq:6}, maximum specific energy capacity \u0394GX=max(GX)-min(GX) by \\eqref{eq:4}, specific IPLPF-accumulated throughput by \\eqref{eq:5}. These 3 values define the accumulation rate. Using a reference LPF, the accumulation rate of IPLPF smoothing is a reference quantifier of solar intermittency. Smoothing by IPLPF vs LPF Global irradiance GI measured, filtered by LPF and by IPLPF, and the specific energy GX accumulated by filters: The left graph shows the measured and low-passed (legend \u201clp\u201d) GI signals on a day with high solar exposure and strong intermittency. The graph on the right shows the specific accumulated energy GX [Wh/m 2 ] by IPLPF (legend \"aavg0\") vs LPF (legend \"lp\") on the given day. Exactly-predicted input signal GI(t+\u0394t) shifts the IPLPF output to the left, minimizing the standard deviation of GX, thus in practise minimizing the difference \u0394GX = max(GX) \u2013 min(GX) which is the specific accumulation capacity. The specific throughput of accumulated energy is also minimized by IPLPF. Costs of IPLPF smoothing Smoothing costs result from the accumulation technology and from the accumulation rate. The accumulation rate results from the solar intermittency and from the desired ramping of smoothed PV power. In a non-ideal smoothing (e.g. PLPF), the values \\eqref{eq:4} and \\eqref{eq:5} are larger the less perfectly controlled the balancing of power between the grid and ESS. In the illustrated example, IPLPF needs only 18%-20% \u0394SOC relative to LPF, and IPLPF accumulates between 57%-70% of the energy throughput relative to LPF (see Tables 2, 3). There is a trade-off between the smoothing quality and the accumulation rate: The lower ramping limit (i.e. smoother s(t)), the higher accumulation rate. This trend is especially critical in PLPF smoothing: the higher \u0394t, the higher prediction error, and the much more higher accumulation rate. Both \u0394SOC and energy throughput reach their theoretical minimum with IPLPF smoothing. Based on the measured GI(t) over a time span of 1 year and the LiFePO4 lifecycle data and prices, the accumulation rate of IPLPF has been aggregated and the corresponding smoothing costs have been calculated. The results show that IPLPF operation is worthwhile with the German power purchase tariff and PV feed-in tariff as of 2021. The ideal smoothing costs are substantially lower than the difference between the electricity purchase and PV feed-in tariffs (assuming that the smooth PV infeed partially eliminates the distribution costs). Small-scale hybrid PV system A household with installed PV power <10kW is connected to the low-voltage grid, having a LiFePO4 BESS with energy capacity \u2248 2h x installed PV power. The hybrid PV system feeds its excessive PV power to the grid, as long as the household\u2019s consumption is satisfied and the battery has been charged. If the charging stops at e.g. 85% SOC max , the BESS provides enough power to smooth the excessive PV infeed to the grid with relative power <1C, provided that the remaining free BESS capacity has been left free for IPLPF smoothing (7% \u0394SOC has to be reserved for IPLPF on 2022-03-04). Additional technical measures have to avoid its microcycling - e.g. the BESS consists from 2 independent batteries. IPLPF costs measured from 04/2021 to 03/2022. The plane of incidence and the applied LPF correspond to the GI(t) and GX(t) plots: Table 1 Conditions of cost calculation: 1/3 of the yearly-generated PV energy by the hybrid PV system is assumed as infeed to the grid (overflow). Microcycling of Li-Ion BESS is eliminated by technical measures. LiFePO4 life cycle data LiFePO4 price per kWh Energy losses due to the AC/DC conversion and accumulation are neglected. The costs are specific per 1 kW of installed PV power. CapEx = initial investment to PV smoothing includes 90% of the BESS capacity reserved for the basic storage, 10% for smoothing. OpEx = regular (e.g. yearly) costs necessary for its uninterrupted operation. The greater from (CapEx, sevice_interval * OpEx) defines the cost of IPLPF smoothing for a given service interval. Having a small free BESS capacity and a total BESS power available, the smoothing by IPLPF is much cheaper than the added value to the PV power infeed is. IPLPF technology offers an affordable smoothing of PV power in grid areas with a high concentration of small-scale hybrid PV systems. Suitable accumulators for IPLPF Although the IPLPF shrinks the necessary capacity and the accumulated throughput to their theoretical minimum, it reciprocally increases the relative smoothing power GI ESS /\u0394GX up to 8 h -1 . Regardless of its reduced capacity, ESS must supply the missing PV power while the direct sun beams are temporarily shadowed by clouds. Lithium accumulators are cheap, efficient and fast, but not enough powerful for a sole IPLPF smoothing. It is not recommended to charge/draw a LiFePO battery by a relative power >> 1 h -1 , otherwise the battery\u2019s life cycle would be curtailed. Such a high relative power is provided by EDLC supercapacitors (SC), but on contrary to Lithium bateries, these do not provide enough cheap capacity to make the IPLPF smoothing affordable. The currently-available RedOx and EDLC technologies do not harmonize with the IPLPF sole smoothing requirements. Actually, the IPLPF demands are well satisfied by a flywheel (FESS) : 1) Its maximum relative power 10 h -1 poses no limit within demands of IPLPF smoothing. 2) IPLPF accumulates energy only on solar-intermittent days (else no accumulation is needed), and the flywheels wear out only when rotating. (Because of unknown prices and life cycle parameters, we calculated neither CapExp, nor OpExp of the flywheel in a role of IPLPF accumulator.) However, the native synergy between demands and features identifies the flywheel as a suitable accumulator for IPLPF smoothing. Summary of IPLPF One year of continous GI(t) measurement has confirmed that if the PV smoothing performed close to the ideal smoothing IPLPF, it would be affordable with LiFePO4 technology when properly implemented in a hybrid PV system (inclusive measures against micro-cycling of BESS). Existing flywheel technology is probably most suitable for the IPLPF smoothing of PV power. Low accumulation rate by IPLPF should motivate the further development of technologies among which the accurate nowcasting of PV power and the smart filtering of PV power are key. Real smoothing of PV power The main objective is to analyze the quality and accumulation rate (in summary: performance) of PV smoothing under real conditions. The measured global irradiance signal GI(t) allows not only the simulation of ideal predictive low-pass smoothing (IPLPF), but also a predictive smoothing of PV power (PLPF) having the low-pass filter excited by a real-predicted signal GI f (t+\u0394t). The values GI f are biased by a prediction error. The numeric results will show that this error induces a significant energy accumulated by the PLPF smoothing. We simulated the prediction error to the measured GI values in order to statistically represent the predicted signal GI f (t+\u0394t) and having a possibility to adjust the prediction error. Thus, the measured GI(t) signal allowed us to analyze the impact of prediction error on the smoothing of PV power. In addition to PLPF, we have developed a \u201csmart predictive\" low-pass smoothing method SPLPF (patent pending), minimizing the accumulated energy with respect to the real-predicted values GI f . Eventually, we analyzed the performance of the following smoothing methods: LPF: Input of LPF excited by the measured signal GI(t) IPLPF: Input of LPF excited by the measured, optimally left-shifted signal GI(t+\u0394t) PLPF: Input of LPF excited by the simulated-predicted signal GI f (t+\u0394t) SPLPF: Smart power filter excited by the simulated-predicted signal GI f . We analzed these smoothing methods by using Butterworth LPF of orders 1 to 4. OLAP analysis The smoothing quality and accumulation rate were analyzed on days exhibiting a strong solar intermittency and a moderate to strong insolation. We fixed the same smoothing quality (ramping limit) for each LPF order used: The low-pass filters of orders 1 to 4 have been tuned to provide equivalent output ramping by the reference IPLPF method, provided that the filter is excited by the measured, optimally shifted GI signal. (With such a tuning, increasing the LPF order increases its cut-off frequency and slightly increases the advance \u0394t.) Eventually, we aggregated the rate of accumulation by the following independent dimensions: smoothing method LPF order smooth_int (prediction error) SE (prediction error) The first goal was to identify the LPF order accumulating the minimum energy, given the smoothing method and ramping limit. It was found out that the optimal filter order for IPLPF is also valid for other smoothing methods. Having the optimum LPF order, the performance of each smoothing method was then analyzed by varrying the prediction eror. The results of OLAP analysis have been tabelized, plotted, and literally expressed. Simulation of predicted PV power We simulated the predicted signal GI f (t+\u0394t) from the measured, left-shifted signal GI(t+\u0394t) by smoothing its \"future\" time course and by superimposing a random error to it, with respect to the fundamental properties of PV predictors: as the advance \u0394t increases, the (unwanted) smoothing of the predicted signal GI f strengthens as the advance \u0394t increases, the impact of random error on GI f increases (statistically cumulates) Impact of both errors on GI f is aggregated at the time t+\u0394t where the advance \u0394t (group delay of LPF) technically expresses the ramping limit (smoothing quality) of the filter. The group delay is a function of the LPF order and its cut-off frequency. We specify the prediction error by 2 quantitative dimensions (OLAP): Interval of prediction, after passing of which the smoothing impact on the predicted signal is strengthened, is defined by the parameter smooth_int [minute]. The shorter this interval, the steeper the smoothing effect rises towards predicted future. Standard deviation of the random prediction error (dimensionless parameter SE). A random value is superimposed to each future GI value. This error is re-generated after passing each 6-minute interval of prediction. The impact of random error on GI f (t+\u0394t) is statistically cumulated over \u0394t. In this report, we simulate the GI f predictors with two different accuracies: \u201cBetter prediction accuracy\u201d: smooth_int = 6 minutes, SE = 0.05 \"Worse prediction accuracy\": smooth_int = 3 minutets, SE = 0.1. Impact of prediction error The smoothing performance exhibits the following dependencies on the partial dimensions expressing the prediction error (see Figures 2, 6): Smoothed predicted signal Changing of smooth_int affects the power smoothing quality neither of SPLPF nor of PLPF method, while for all values, the PLPF method performs smoother than the SPLPF method (Figures 3, 4, 7, 8). Lowering of smooth_int dramatically increases the accumulation rate of PLPF, which is always much greater than the accumulation rate of SPLPF (Figures 5, 9). With \"worse prediction accuracy\", the PLPF method even exceeds the accumulation rate induced by the LPF method (Figure 9). In the SPLPF method, the accumulation rate increases only slightly and much more slowly than in PLPF. Random error in predicted values Increasing of SE has no impact on the power smoothing quality of the PLPF method, but it does degrade the smoothing by SPLPF (check Figure 7 vs Figure 8). In PLPF, the smoothing quality with standard error SE > 0 is always better than in SPLPF. Increasing of SE significantly increases the accumulation rate by the PLPF method (Figures 5, 9), which is for all values SE > 0 much higher than by the SPLPF method. For some SE values, the PLPF method even exceeds the LPF method in its accumulation rate. The accumulation rate increases only slightly in the SPLPF method, and less so the higher the filter order (1 - 3). Analysis by LPF order Filter order is another OLAP dimension, impact of which on the smoothing performance was analyzed together with the prediction error. We analyzed the LPF orders 1 to 4 (Figures 10-21): Filter order does not affect the power smoothing quality achieved by PLPF method. For small filter orders, the smoothing by PLPF is better than by SPLPF. Increasing the filter order from 1 to 3 notably improves the smoothing quality of SPLPF, given the prediction error (Figures 10-12, 16-18). Increasing the filter order only slightly reduces the accumulation rate by PLPF which is always substantially greater than the accumulation rate by SPLPF. Increasing the filter order notably reduces the accumulation rate induced by both IPLPF and SPLPF smoothing methods (Figures 13-15, 19-21). With the simulated predictor, this trend is reversed between orders 3 and 4 by the SPLPF method. With the simulated predictor, SPLPF performs best with the filter order 3. Numerical results of smoothing Rate of accumulation by method Accumulation rate of each smoothing method in the selected days, using filter order 3: Table 2 Table 3 Maximum specific power from/to ESS calculated by \\eqref{eq:6} is in the column \"GI ESS \". Difference between the maximum and minimum specific accumulated energy calculated by \\eqref{eq:4} is in the column \"\u0394GX\". Daily flow of the specific energy through ESS calculated by \\eqref{eq:5} is in the column \"Throughput\". Global exposure of the plane of incidence is also displayed. With \"better prediction accuracy\" during the selected days, SPLPF smoothing required the relative ESS power between 5.5h -1 - 7.2h -1 which is 3.8 - 4.8 times more then with LPF, 2.4 - 4.2 times more than with PLPF, and eventually 84% - 99% of the IPLPF power request. The SPLPF smoothing required 21% - 22% of the ESS energy capacity used by LPF, or 24% - 41% of the capacity used by PLPF. SPLPF eventually required 1.0 - 1.2 times the ESS capacity used by IPLPF. The SPLPF smoothing put 58% - 73% of the energy through ESS relative to the LPF method, or 75% - 83% of the energy throughput by PLPF. SPLPF eventually put 1.0 - 1.1 times more energy through ESS than the IPLPF method. With \"worse prediction accuracy\" during the selected days, SPLPF smoothing required the relative ESS power between 3.8h -1 - 6.3h -1 which is 2.6 - 4.2 times more then with LPF, 3.6 - 5.1 times more than with PLPF, and eventually 58% - 86% of the IPLPF power request. The SPLPF smoothing required 24% - 33% of the ESS energy capacity used by LPF, or 19% - 28% of the capacity used by PLPF. SPLPF eventually required 1.2 - 1.8 times the ESS capacity used by IPLPF. The SPLPF smoothing put 59% - 77% of the daily energy through ESS relative to the LPF method, or 63% - 69% of the energy throughput by PLPF. SPLPF eventually put 1.0 - 1.1 times more energy through ESS than the IPLPF method. SPLPF vs IPLPF Although we did not analyze the whole year (the numerical simulation of SPLPF is computationally intensive), our analysis of the 4 smoothing methods on the selected days with high solar intermittency and various solar exposure, with 4 filter orders, and with varrying prediction error provides a detailed insight into the SPLPF performance. This smoothing method performs much better than PLPF. With a relatively small prediction error, SPLPF performs close to the ideal smoothing IPLPF. The presented empirical results have been also theoretically proven (part of the patent application). Graphical display of smoothing The following graphs show the smoothing quality and accumulated energy according to the smoothing method and the rest OLAP dimensions. The measured PV data from 2 selected days have been processed and plotted as the following time series: Measured GI(t), synchronized with predicted GI f (1 hour zoomed) - Figures 2, 6 Measured GI(t) and its smooth counterpart by the prediction accuracy, comparing all smoothing methods, having optimal LPF order applied - Figures 3, 4, 7, 8 Accumulated GX(t) by the prediction accuracy, comparing all smoothing methods, having optimal LPF order applied - Figures 5, 9 Smoothed GI(t) by the filter order and prediction accuracy, comparing IPLPF and SPLPF smoothing methods - Figures 10-12, 16-18 Accumulated GX(t) by the filter order and prediction accuracy, comparing IPLPF and SPLPF smoothing methods - Figures 13-15, 19-21 Analysis by prediction error A day with medium insolation Figure 2: Measured GI synchronized with GIf (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Figure 3: Measured and smoothed GI by 4 different methods; better prediction accuracy Figure 4: Measured and smoothed GI by 4 smoothing methods; worse prediction accuracy Figure 5: Time course of GX accumulated by 4 smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) A day with high insolation Figure 6: Measured GI synchronized with GIf (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Figure 7: Measured and smoothed GI by 4 smoothing methods; better prediction accuracy Figure 8: Measured and smoothed GI by 4 smoothing methods; worse prediction accuracy Figure 9: Time course of GX accumulated by 4 smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Analysis by LPF order Following graphs compare the smoothing by IPLPF vs SPLPF method: A day with medium insolation Figure 10: Time course of IPLPF-smoothed GI shows its similar quality for each filter order Figure 11: Time course of SPLPF-smoothed GI by filter order; better prediction accuracy Figure 12: Time course of SPLPF-smoothed GI by filter order; worse prediction accuracy Figure 13: Time course of IPLPF-accumulated GX by filter order Figure 14: Time course of SPLPF-accumulated GX by filter order; better prediction accuracy Figure 15: Time course of SPLPF-accumulated GX by filter order; worse prediction accuracy . A day with high insolation Figure 16: Time course of IPLPF-smoothed GI shows its similar quality for each filter order Figure 17: Time course of SPLPF-smoothed GI by filter order; better prediction accuracy Figure 18: Time course of SPLPF-smoothed GI by filter order; worse prediction accuracy Figure 19 Time course of IPLPF-accumulated GX by filter order) Figure 20: Time course of SPLPF-accumulated GX by filter order; better prediction accuracy Figure 21: Time course of SPLPF-accumulated GX by filter order; worse prediction accuracy", "title": "PV Smoothing"}, {"location": "pv_smooth/#smoothing-of-intermittent-pv-power", "text": "The objective of PV smoothing is to meet the given ramping limits of PV power, while accumulating the minimum possible energy by smoothing. If the smooth PV power is generated by a low-pass filter (LPF) excited by the output power of PV panels, then such a power filter induces high accumulation costs due to its time lag (group delay in its frequency response). The higher LPF order or its lower cut-off frequency, the smoother output but the greater group delay. The time lag could be eliminated in theory, if the LPF was excited by a future PV power signal. Unfortunately, the the time course of PV power is random and its short-time prediction (nowcasting) is not exact and its error considerably increases the accumulated energy by LPF. Recently, various predictive filters e.g. zero group-delay filter , Kalman filter have been developed to avoid the accumulation of PV energy due to the time lag of LPF. Advantage of predictive filters is that they integrate the predictor and LPF into a same functional entity, potentially accumulating less energy than a standard LPF excited by a predicted PV power does. But the self-predicted filters are trained only by information carried by the measured power signal p(t), lacking the information from sky imagery. As a result, the accumulation cost induced by predictive filters still exceeds the production costs of fossil and nuclear electricity (assuming current social cost of CO 2 and nuclear waste). Our analysis will be therefore focused on the application of LPF excited by PV predictor trained by both sky imagery and p(t) signals. We further integrate the two into one entity, utilizing the theoretical advantage of predictive filters. Figure 1: Smoothing of PV power by a low-pass filter In the schematic diagram on Figure 1, a PV power plant (PVPP) is connected to the grid and its intermittent power p(t) is accumulated or compensated (i.e. smoothed) by an accumulator (ESS). The smoothing power is actuated by a bidirectional inverter AC/DC. The smoothing power is determined by the ouput signal p(t)-s(t+\u0394t) of a differencer. Positive sign of the smoothing power is oriented from the grid to ESS. Hence the total power superimposed to the grid by PVPP and ESS is determined by the filter\u2019s output signal s(t+\u0394t). For the simplification, PVPP and ESS are single-phase-connected to the grid. 4 different smoothing methods will be further analysed: In case of LPF smoothing, the measured signal p(t) bypasses the predictor, directly exciting LPF. In theory, an ideal predictive smoothing IPLPF excites LPF by the exact future PV power signal p(t+\u0394t) where the time advance \u0394t is absolutely equal to the LPF's group delay at frequencies f<<f c where f c is the cut-off frequency of LPF. The smooth power signal s(t+\u0394t) is the response of LPF to the input signal p(t+\u0394t). According to the schematic diagram, a PLPF smoothing method excites the LPF by a predicted PV power signal p f (t+\u0394t), approximating the signal p(t+\u0394t). The predictor is trained by the sky-imagery signal and by the measured PV power p(t). Eventually, a smart smoothing method SPLPF (patent pending) has been designed, integrating the LPF with the PV predictor trained by both the sky-imagery and the measured PV power p(t). This method uses a modified scheme.", "title": "Smoothing of intermittent PV power"}, {"location": "pv_smooth/#accumulation-of-energy-by-smoothing", "text": "For simplicity of analysis, energy losses in AC/DC conversion and accumulation will be neglected. Time course of the accumulated energy by ESS: $$SOC(t)=\\int_{0}^t (p(\\tau)-s(\\tau+\\Delta t))d\\tau\\tag{1}\\label{eq:1}$$ defines the change in the state-of-charge [Wh] since time=0 until time=t, while SOC may acquire both positive and negative values. (Always-positive SOC values in ESS can be technically managed.) The time advance \u0394t reduces absolute values of the integrated function. The IPLPF-defined signal s(\u03c4+\u0394t) ensures that following 4 technical criteria are satisfied: Mean value of SOC is near to zero: $${1 \\over T} \\int_{0}^T SOC (t) dt \u2248 0\\tag{2}\\label{eq:2}$$ Mean quadratic deviation of SOC is near to minimum: $${1 \\over T} \\int_{0}^T SOC^2 (t) dt \u2248 min\\tag{3}\\label{eq:3}$$ Hence the required storage capacity per cycle T (24 hours in case of PV power p(t)) is close to minimum: $$\\Delta SOC = max(SOC) \u2013 min(SOC) \u2248 min\\tag{4}\\label{eq:4}$$ At the begining of each cycle, the value min(SOC) should be predicted and ESS must be accordingly pre-charged to -min(SOC) in order to keep SOC\u22650 during the whole cycle. Eventually, near-to-minimum throughput of accumulated energy per cycle is achieved by IPLPF: $${1 \\over 2} \\int_{0}^T|p(\\tau)-s(\\tau+\\Delta t)|d \\tau \u2248 min\\tag{5}\\label{eq:5}$$ The accumulation rate is expressed by \\eqref{eq:4} and \\eqref{eq:5}, and by the demanded power from/to ESS during a sudden loss or a peak of direct sunlight: $$P_{ESS}=max|p(\\tau)-s(\\tau+\\Delta t)|\\tag{6}\\label{eq:6}$$ In practise, its maximum value does not exceed 80% of the installed PV power. Let us expect that the PV power p(t) is proportional to the global solar irradiance GI [W/m 2 ]. In our experiment, the solar irradiance is intercepted by a planar panel 20 cm x 16 cm on the earth\u2019s surface at latitude=48.2\u00b0N, longitude=17.1\u00b0E, with the plane of incidence elevated by 47\u00b0, south-oriented. To be exact, it should be mentioned that p(t) is usually smoother than GI(t), as the (usually greater) surface area of the corresponding PV plane acts like a moving-average filter of GI(t). Unfortunately, the size and speed of clouds prevent a sufficient smoothing effect from being achieved by the PV surface area. Assuming the proportionality between GI(t) and p(t), we analyze the worst case of PV intermittency. Let us now substitute the signals p(\u03c4), s(\u03c4+\u0394t) in \\eqref{eq:1}, \\eqref{eq:5}, \\eqref{eq:6} by the measured signal GI(\u03c4) and by its \u201cpredicted-and-smoothed\u201d counterpart GI s (\u03c4+\u0394t). After substituting, the intergal \\eqref{eq:1} computes the time course of specific accumulated energy GX(t) [Wh/m 2 ] by the filter, whereas SOC(t) is proportional to GX(t). The integral \\eqref{eq:5} computes the specific accumulated throughput [Wh/m 2 ] per cycle T.", "title": "Accumulation of energy by smoothing"}, {"location": "pv_smooth/#ideal-predictive-smoothing-iplpf", "text": "We simulate the operation of ideal predictive PV smoothing (IPLPF) by means of a LPF, ex-post excited by a future signal GI(t+\u0394t) where GI(t) is measured and the time advance \u0394t (above defined) eliminates the filter\u2019s time lag. In theory, such an ideal smoothing would minimize the accumulated energy for the given ramping limit. This analysis aims to reveal the potential affordability of PV smoothing, assuming that a real smoothing technology exists, performing close to IPLPF. The numeric experiment is based on the measured solar irradiance over a period of 1 year, and the contemporary prices of LiFePO4 accumulators.", "title": "Ideal predictive smoothing (IPLPF)"}, {"location": "pv_smooth/#accumulation-rate", "text": "The measured signal GI(t) and applied LPF allows for the aggregation of specific ESS parameters requested by the IPLPF smoothing: maximum specific power GI ESS =max|GI(\u03c4)-GI s (\u03c4+\u0394t)| by \\eqref{eq:6}, maximum specific energy capacity \u0394GX=max(GX)-min(GX) by \\eqref{eq:4}, specific IPLPF-accumulated throughput by \\eqref{eq:5}. These 3 values define the accumulation rate. Using a reference LPF, the accumulation rate of IPLPF smoothing is a reference quantifier of solar intermittency.", "title": "Accumulation rate"}, {"location": "pv_smooth/#smoothing-by-iplpf-vs-lpf", "text": "Global irradiance GI measured, filtered by LPF and by IPLPF, and the specific energy GX accumulated by filters: The left graph shows the measured and low-passed (legend \u201clp\u201d) GI signals on a day with high solar exposure and strong intermittency. The graph on the right shows the specific accumulated energy GX [Wh/m 2 ] by IPLPF (legend \"aavg0\") vs LPF (legend \"lp\") on the given day. Exactly-predicted input signal GI(t+\u0394t) shifts the IPLPF output to the left, minimizing the standard deviation of GX, thus in practise minimizing the difference \u0394GX = max(GX) \u2013 min(GX) which is the specific accumulation capacity. The specific throughput of accumulated energy is also minimized by IPLPF.", "title": "Smoothing by IPLPF vs LPF"}, {"location": "pv_smooth/#costs-of-iplpf-smoothing", "text": "Smoothing costs result from the accumulation technology and from the accumulation rate. The accumulation rate results from the solar intermittency and from the desired ramping of smoothed PV power. In a non-ideal smoothing (e.g. PLPF), the values \\eqref{eq:4} and \\eqref{eq:5} are larger the less perfectly controlled the balancing of power between the grid and ESS. In the illustrated example, IPLPF needs only 18%-20% \u0394SOC relative to LPF, and IPLPF accumulates between 57%-70% of the energy throughput relative to LPF (see Tables 2, 3). There is a trade-off between the smoothing quality and the accumulation rate: The lower ramping limit (i.e. smoother s(t)), the higher accumulation rate. This trend is especially critical in PLPF smoothing: the higher \u0394t, the higher prediction error, and the much more higher accumulation rate. Both \u0394SOC and energy throughput reach their theoretical minimum with IPLPF smoothing. Based on the measured GI(t) over a time span of 1 year and the LiFePO4 lifecycle data and prices, the accumulation rate of IPLPF has been aggregated and the corresponding smoothing costs have been calculated. The results show that IPLPF operation is worthwhile with the German power purchase tariff and PV feed-in tariff as of 2021. The ideal smoothing costs are substantially lower than the difference between the electricity purchase and PV feed-in tariffs (assuming that the smooth PV infeed partially eliminates the distribution costs).", "title": "Costs of IPLPF smoothing"}, {"location": "pv_smooth/#small-scale-hybrid-pv-system", "text": "A household with installed PV power <10kW is connected to the low-voltage grid, having a LiFePO4 BESS with energy capacity \u2248 2h x installed PV power. The hybrid PV system feeds its excessive PV power to the grid, as long as the household\u2019s consumption is satisfied and the battery has been charged. If the charging stops at e.g. 85% SOC max , the BESS provides enough power to smooth the excessive PV infeed to the grid with relative power <1C, provided that the remaining free BESS capacity has been left free for IPLPF smoothing (7% \u0394SOC has to be reserved for IPLPF on 2022-03-04). Additional technical measures have to avoid its microcycling - e.g. the BESS consists from 2 independent batteries. IPLPF costs measured from 04/2021 to 03/2022. The plane of incidence and the applied LPF correspond to the GI(t) and GX(t) plots: Table 1", "title": "Small-scale hybrid PV system"}, {"location": "pv_smooth/#conditions-of-cost-calculation", "text": "1/3 of the yearly-generated PV energy by the hybrid PV system is assumed as infeed to the grid (overflow). Microcycling of Li-Ion BESS is eliminated by technical measures. LiFePO4 life cycle data LiFePO4 price per kWh Energy losses due to the AC/DC conversion and accumulation are neglected. The costs are specific per 1 kW of installed PV power. CapEx = initial investment to PV smoothing includes 90% of the BESS capacity reserved for the basic storage, 10% for smoothing. OpEx = regular (e.g. yearly) costs necessary for its uninterrupted operation. The greater from (CapEx, sevice_interval * OpEx) defines the cost of IPLPF smoothing for a given service interval. Having a small free BESS capacity and a total BESS power available, the smoothing by IPLPF is much cheaper than the added value to the PV power infeed is. IPLPF technology offers an affordable smoothing of PV power in grid areas with a high concentration of small-scale hybrid PV systems.", "title": "Conditions of cost calculation:"}, {"location": "pv_smooth/#suitable-accumulators-for-iplpf", "text": "Although the IPLPF shrinks the necessary capacity and the accumulated throughput to their theoretical minimum, it reciprocally increases the relative smoothing power GI ESS /\u0394GX up to 8 h -1 . Regardless of its reduced capacity, ESS must supply the missing PV power while the direct sun beams are temporarily shadowed by clouds. Lithium accumulators are cheap, efficient and fast, but not enough powerful for a sole IPLPF smoothing. It is not recommended to charge/draw a LiFePO battery by a relative power >> 1 h -1 , otherwise the battery\u2019s life cycle would be curtailed. Such a high relative power is provided by EDLC supercapacitors (SC), but on contrary to Lithium bateries, these do not provide enough cheap capacity to make the IPLPF smoothing affordable. The currently-available RedOx and EDLC technologies do not harmonize with the IPLPF sole smoothing requirements. Actually, the IPLPF demands are well satisfied by a flywheel (FESS) : 1) Its maximum relative power 10 h -1 poses no limit within demands of IPLPF smoothing. 2) IPLPF accumulates energy only on solar-intermittent days (else no accumulation is needed), and the flywheels wear out only when rotating. (Because of unknown prices and life cycle parameters, we calculated neither CapExp, nor OpExp of the flywheel in a role of IPLPF accumulator.) However, the native synergy between demands and features identifies the flywheel as a suitable accumulator for IPLPF smoothing.", "title": "Suitable accumulators for IPLPF"}, {"location": "pv_smooth/#summary-of-iplpf", "text": "One year of continous GI(t) measurement has confirmed that if the PV smoothing performed close to the ideal smoothing IPLPF, it would be affordable with LiFePO4 technology when properly implemented in a hybrid PV system (inclusive measures against micro-cycling of BESS). Existing flywheel technology is probably most suitable for the IPLPF smoothing of PV power. Low accumulation rate by IPLPF should motivate the further development of technologies among which the accurate nowcasting of PV power and the smart filtering of PV power are key.", "title": "Summary of IPLPF"}, {"location": "pv_smooth/#real-smoothing-of-pv-power", "text": "The main objective is to analyze the quality and accumulation rate (in summary: performance) of PV smoothing under real conditions. The measured global irradiance signal GI(t) allows not only the simulation of ideal predictive low-pass smoothing (IPLPF), but also a predictive smoothing of PV power (PLPF) having the low-pass filter excited by a real-predicted signal GI f (t+\u0394t). The values GI f are biased by a prediction error. The numeric results will show that this error induces a significant energy accumulated by the PLPF smoothing. We simulated the prediction error to the measured GI values in order to statistically represent the predicted signal GI f (t+\u0394t) and having a possibility to adjust the prediction error. Thus, the measured GI(t) signal allowed us to analyze the impact of prediction error on the smoothing of PV power. In addition to PLPF, we have developed a \u201csmart predictive\" low-pass smoothing method SPLPF (patent pending), minimizing the accumulated energy with respect to the real-predicted values GI f . Eventually, we analyzed the performance of the following smoothing methods: LPF: Input of LPF excited by the measured signal GI(t) IPLPF: Input of LPF excited by the measured, optimally left-shifted signal GI(t+\u0394t) PLPF: Input of LPF excited by the simulated-predicted signal GI f (t+\u0394t) SPLPF: Smart power filter excited by the simulated-predicted signal GI f . We analzed these smoothing methods by using Butterworth LPF of orders 1 to 4.", "title": "Real smoothing of PV power"}, {"location": "pv_smooth/#olap-analysis", "text": "The smoothing quality and accumulation rate were analyzed on days exhibiting a strong solar intermittency and a moderate to strong insolation. We fixed the same smoothing quality (ramping limit) for each LPF order used: The low-pass filters of orders 1 to 4 have been tuned to provide equivalent output ramping by the reference IPLPF method, provided that the filter is excited by the measured, optimally shifted GI signal. (With such a tuning, increasing the LPF order increases its cut-off frequency and slightly increases the advance \u0394t.) Eventually, we aggregated the rate of accumulation by the following independent dimensions: smoothing method LPF order smooth_int (prediction error) SE (prediction error) The first goal was to identify the LPF order accumulating the minimum energy, given the smoothing method and ramping limit. It was found out that the optimal filter order for IPLPF is also valid for other smoothing methods. Having the optimum LPF order, the performance of each smoothing method was then analyzed by varrying the prediction eror. The results of OLAP analysis have been tabelized, plotted, and literally expressed.", "title": "OLAP analysis"}, {"location": "pv_smooth/#simulation-of-predicted-pv-power", "text": "We simulated the predicted signal GI f (t+\u0394t) from the measured, left-shifted signal GI(t+\u0394t) by smoothing its \"future\" time course and by superimposing a random error to it, with respect to the fundamental properties of PV predictors: as the advance \u0394t increases, the (unwanted) smoothing of the predicted signal GI f strengthens as the advance \u0394t increases, the impact of random error on GI f increases (statistically cumulates) Impact of both errors on GI f is aggregated at the time t+\u0394t where the advance \u0394t (group delay of LPF) technically expresses the ramping limit (smoothing quality) of the filter. The group delay is a function of the LPF order and its cut-off frequency. We specify the prediction error by 2 quantitative dimensions (OLAP): Interval of prediction, after passing of which the smoothing impact on the predicted signal is strengthened, is defined by the parameter smooth_int [minute]. The shorter this interval, the steeper the smoothing effect rises towards predicted future. Standard deviation of the random prediction error (dimensionless parameter SE). A random value is superimposed to each future GI value. This error is re-generated after passing each 6-minute interval of prediction. The impact of random error on GI f (t+\u0394t) is statistically cumulated over \u0394t. In this report, we simulate the GI f predictors with two different accuracies: \u201cBetter prediction accuracy\u201d: smooth_int = 6 minutes, SE = 0.05 \"Worse prediction accuracy\": smooth_int = 3 minutets, SE = 0.1.", "title": "Simulation of predicted PV power"}, {"location": "pv_smooth/#impact-of-prediction-error", "text": "The smoothing performance exhibits the following dependencies on the partial dimensions expressing the prediction error (see Figures 2, 6): Smoothed predicted signal Changing of smooth_int affects the power smoothing quality neither of SPLPF nor of PLPF method, while for all values, the PLPF method performs smoother than the SPLPF method (Figures 3, 4, 7, 8). Lowering of smooth_int dramatically increases the accumulation rate of PLPF, which is always much greater than the accumulation rate of SPLPF (Figures 5, 9). With \"worse prediction accuracy\", the PLPF method even exceeds the accumulation rate induced by the LPF method (Figure 9). In the SPLPF method, the accumulation rate increases only slightly and much more slowly than in PLPF. Random error in predicted values Increasing of SE has no impact on the power smoothing quality of the PLPF method, but it does degrade the smoothing by SPLPF (check Figure 7 vs Figure 8). In PLPF, the smoothing quality with standard error SE > 0 is always better than in SPLPF. Increasing of SE significantly increases the accumulation rate by the PLPF method (Figures 5, 9), which is for all values SE > 0 much higher than by the SPLPF method. For some SE values, the PLPF method even exceeds the LPF method in its accumulation rate. The accumulation rate increases only slightly in the SPLPF method, and less so the higher the filter order (1 - 3).", "title": "Impact of prediction error"}, {"location": "pv_smooth/#analysis-by-lpf-order", "text": "Filter order is another OLAP dimension, impact of which on the smoothing performance was analyzed together with the prediction error. We analyzed the LPF orders 1 to 4 (Figures 10-21): Filter order does not affect the power smoothing quality achieved by PLPF method. For small filter orders, the smoothing by PLPF is better than by SPLPF. Increasing the filter order from 1 to 3 notably improves the smoothing quality of SPLPF, given the prediction error (Figures 10-12, 16-18). Increasing the filter order only slightly reduces the accumulation rate by PLPF which is always substantially greater than the accumulation rate by SPLPF. Increasing the filter order notably reduces the accumulation rate induced by both IPLPF and SPLPF smoothing methods (Figures 13-15, 19-21). With the simulated predictor, this trend is reversed between orders 3 and 4 by the SPLPF method. With the simulated predictor, SPLPF performs best with the filter order 3.", "title": "Analysis by LPF order"}, {"location": "pv_smooth/#numerical-results-of-smoothing", "text": "", "title": "Numerical results of smoothing"}, {"location": "pv_smooth/#rate-of-accumulation-by-method", "text": "Accumulation rate of each smoothing method in the selected days, using filter order 3: Table 2 Table 3 Maximum specific power from/to ESS calculated by \\eqref{eq:6} is in the column \"GI ESS \". Difference between the maximum and minimum specific accumulated energy calculated by \\eqref{eq:4} is in the column \"\u0394GX\". Daily flow of the specific energy through ESS calculated by \\eqref{eq:5} is in the column \"Throughput\". Global exposure of the plane of incidence is also displayed. With \"better prediction accuracy\" during the selected days, SPLPF smoothing required the relative ESS power between 5.5h -1 - 7.2h -1 which is 3.8 - 4.8 times more then with LPF, 2.4 - 4.2 times more than with PLPF, and eventually 84% - 99% of the IPLPF power request. The SPLPF smoothing required 21% - 22% of the ESS energy capacity used by LPF, or 24% - 41% of the capacity used by PLPF. SPLPF eventually required 1.0 - 1.2 times the ESS capacity used by IPLPF. The SPLPF smoothing put 58% - 73% of the energy through ESS relative to the LPF method, or 75% - 83% of the energy throughput by PLPF. SPLPF eventually put 1.0 - 1.1 times more energy through ESS than the IPLPF method. With \"worse prediction accuracy\" during the selected days, SPLPF smoothing required the relative ESS power between 3.8h -1 - 6.3h -1 which is 2.6 - 4.2 times more then with LPF, 3.6 - 5.1 times more than with PLPF, and eventually 58% - 86% of the IPLPF power request. The SPLPF smoothing required 24% - 33% of the ESS energy capacity used by LPF, or 19% - 28% of the capacity used by PLPF. SPLPF eventually required 1.2 - 1.8 times the ESS capacity used by IPLPF. The SPLPF smoothing put 59% - 77% of the daily energy through ESS relative to the LPF method, or 63% - 69% of the energy throughput by PLPF. SPLPF eventually put 1.0 - 1.1 times more energy through ESS than the IPLPF method.", "title": "Rate of accumulation by method"}, {"location": "pv_smooth/#splpf-vs-iplpf", "text": "Although we did not analyze the whole year (the numerical simulation of SPLPF is computationally intensive), our analysis of the 4 smoothing methods on the selected days with high solar intermittency and various solar exposure, with 4 filter orders, and with varrying prediction error provides a detailed insight into the SPLPF performance. This smoothing method performs much better than PLPF. With a relatively small prediction error, SPLPF performs close to the ideal smoothing IPLPF. The presented empirical results have been also theoretically proven (part of the patent application).", "title": "SPLPF vs IPLPF"}, {"location": "pv_smooth/#graphical-display-of-smoothing", "text": "The following graphs show the smoothing quality and accumulated energy according to the smoothing method and the rest OLAP dimensions. The measured PV data from 2 selected days have been processed and plotted as the following time series: Measured GI(t), synchronized with predicted GI f (1 hour zoomed) - Figures 2, 6 Measured GI(t) and its smooth counterpart by the prediction accuracy, comparing all smoothing methods, having optimal LPF order applied - Figures 3, 4, 7, 8 Accumulated GX(t) by the prediction accuracy, comparing all smoothing methods, having optimal LPF order applied - Figures 5, 9 Smoothed GI(t) by the filter order and prediction accuracy, comparing IPLPF and SPLPF smoothing methods - Figures 10-12, 16-18 Accumulated GX(t) by the filter order and prediction accuracy, comparing IPLPF and SPLPF smoothing methods - Figures 13-15, 19-21", "title": "Graphical display of smoothing"}, {"location": "pv_smooth/#analysis-by-prediction-error", "text": "", "title": "Analysis by prediction error"}, {"location": "pv_smooth/#a-day-with-medium-insolation", "text": "Figure 2: Measured GI synchronized with GIf (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Figure 3: Measured and smoothed GI by 4 different methods; better prediction accuracy Figure 4: Measured and smoothed GI by 4 smoothing methods; worse prediction accuracy Figure 5: Time course of GX accumulated by 4 smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy)", "title": "A day with medium insolation"}, {"location": "pv_smooth/#a-day-with-high-insolation", "text": "Figure 6: Measured GI synchronized with GIf (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Figure 7: Measured and smoothed GI by 4 smoothing methods; better prediction accuracy Figure 8: Measured and smoothed GI by 4 smoothing methods; worse prediction accuracy Figure 9: Time course of GX accumulated by 4 smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy)", "title": "A day with high insolation"}, {"location": "pv_smooth/#analysis-by-lpf-order_1", "text": "Following graphs compare the smoothing by IPLPF vs SPLPF method:", "title": "Analysis by LPF order"}, {"location": "pv_smooth/#a-day-with-medium-insolation_1", "text": "Figure 10: Time course of IPLPF-smoothed GI shows its similar quality for each filter order Figure 11: Time course of SPLPF-smoothed GI by filter order; better prediction accuracy Figure 12: Time course of SPLPF-smoothed GI by filter order; worse prediction accuracy Figure 13: Time course of IPLPF-accumulated GX by filter order Figure 14: Time course of SPLPF-accumulated GX by filter order; better prediction accuracy Figure 15: Time course of SPLPF-accumulated GX by filter order; worse prediction accuracy .", "title": "A day with medium insolation"}, {"location": "pv_smooth/#a-day-with-high-insolation_1", "text": "Figure 16: Time course of IPLPF-smoothed GI shows its similar quality for each filter order Figure 17: Time course of SPLPF-smoothed GI by filter order; better prediction accuracy Figure 18: Time course of SPLPF-smoothed GI by filter order; worse prediction accuracy Figure 19 Time course of IPLPF-accumulated GX by filter order) Figure 20: Time course of SPLPF-accumulated GX by filter order; better prediction accuracy Figure 21: Time course of SPLPF-accumulated GX by filter order; worse prediction accuracy", "title": "A day with high insolation"}, {"location": "v_glossary/", "text": "List of acronyms AC/DC = AC to DC power conversion A/D = analog to digital data conversion AI = artificial intelligence BESS = battery energy storage system CapEx = capital expenditures for PV smoothing [\\$/kW] DC/AC = DC to AC power conversion (inversion) dHI = diffused horizontal irradiance [W/m 2 ] DHI = direct horizontal irradiance [W/m 2 ] DNI = direct normal irradiance [W/m 2 ] EDLC = electric double layer capacitor (supercapacitor) ESS = energy storage system (unspecified technology) FESS = flywheel energy storage system GHI = global horizontal irradiance [W/m 2 ] GI = global irradiance [W/m 2 ] (unspecified plane of incidence) GIf = forecasted future global irradiance [W/m 2 ] GNI = global normal irradiance [W/m 2 ] GX = specific accumulated energy by filter (GI-corresponding) [Wh/m 2 ] HSC = hybrid supercapacitor IPLPF = ideal predictive low-pass filter Li-Ion = Lithium-Ion accumulation technology LPF = low-pass filter MPPT = maximum power point tracking OLAP = online analytical processing (of pre-aggregated data) OpEx = operational expenditures for PV smoothing [\\$/kW/year] PLPF = predictive low-pass filter PV = photovoltaic PVPP = photovoltasic power plant RedOx = Reduction-Oxidation accumulation technology SC = supercapacitor SE = standard error SOC = state of charge [Wh] SPLPF = smart predictive low-pass filter \u0394t = advance time interval [minute]", "title": "Glossary"}, {"location": "v_glossary/#list-of-acronyms", "text": "AC/DC = AC to DC power conversion A/D = analog to digital data conversion AI = artificial intelligence BESS = battery energy storage system CapEx = capital expenditures for PV smoothing [\\$/kW] DC/AC = DC to AC power conversion (inversion) dHI = diffused horizontal irradiance [W/m 2 ] DHI = direct horizontal irradiance [W/m 2 ] DNI = direct normal irradiance [W/m 2 ] EDLC = electric double layer capacitor (supercapacitor) ESS = energy storage system (unspecified technology) FESS = flywheel energy storage system GHI = global horizontal irradiance [W/m 2 ] GI = global irradiance [W/m 2 ] (unspecified plane of incidence) GIf = forecasted future global irradiance [W/m 2 ] GNI = global normal irradiance [W/m 2 ] GX = specific accumulated energy by filter (GI-corresponding) [Wh/m 2 ] HSC = hybrid supercapacitor IPLPF = ideal predictive low-pass filter Li-Ion = Lithium-Ion accumulation technology LPF = low-pass filter MPPT = maximum power point tracking OLAP = online analytical processing (of pre-aggregated data) OpEx = operational expenditures for PV smoothing [\\$/kW/year] PLPF = predictive low-pass filter PV = photovoltaic PVPP = photovoltasic power plant RedOx = Reduction-Oxidation accumulation technology SC = supercapacitor SE = standard error SOC = state of charge [Wh] SPLPF = smart predictive low-pass filter \u0394t = advance time interval [minute]", "title": "List of acronyms"}]}