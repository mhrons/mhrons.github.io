{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"My name is Milan Hronsk\u00fd . I live in Slovakia, and work on better integration of intermittent renewable energy in the grid . You can contact me via LinkedIn My photovoltaic projects: PV Logger PV Smoothing","title":"About me"},{"location":"MkDocs/","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs gh-deploy - Deploy the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Welcome to MkDocs"},{"location":"MkDocs/#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"MkDocs/#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs gh-deploy - Deploy the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"MkDocs/#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"pv_log/","text":"Photovoltaic intermittency and its measurement Impact on the grid Intermittency of solar irradiance causes that time course of photovoltaic (PV) power generation is unstable over time. As the share of PV energy in the grid increases, the intermittency of solar power is posing still higher risk to the power quality and grid's stability. To mitigate the temporary unbalance between PV infeed and power consumption, a grid operator sets PV generators off-grid (or at least to a low efficiency mode) while the solar intermittency is strong. For example, the losses of intermittent PV energy were 7% in 2011 in the US state Arizona. This loss-rate is determined by the stratospheric solar intermittency and by the level of PV energy penetration in the grid: The higher PV penetration, the higher relative(!) losses due to the intermittency. Extra grid-control costs are raised by the PV intermittency. This overall impact has been projected to the last guaranteed feed-in tariff for new PV installations in Germany: In 2020, a new feed-in tariff was only about 1/3 of the purchase tariff. The state guarantee has been canceled as of 2021, and there is no more doubt that only technical innovations can further augment the share of PV energy in the grid: Smoothing of PV power could eliminate the losses of intermitent PV energy and of additional grid control costs. A smooth time course of renewable power can easily be complemented by other resources (e.g. gas- and water turbines), which is impossible with the rapidly-intermittent renewable power. On the other hand, the loss-free PV smoothing takes up expensive accumulation capacity, otherwise usable as energy storage. We will analyze and optimize the application of a low-pass filter for smoothing the PV power on days with solar intermittency. Measurement of global irradiance Accurate measurement of global irradiance (GI) is a prerequisite for PV smoothing: Accurate short-term forecasting (nowcasting) of PV power is crucial to minimize the accumulation of energy in PV power smoothing. PV power predictors are based on artificial intelligence (AI) and they can be trained by a sky-imagery and by the measured signal GI(t), in particular by its fraction intercepted by a tilted PV panel. By means of the measured signal GI(t), we can excite a low-pass filter by \"ex-post predicted\" input signal GIf(t+\u0394t), as if its GIf values were the meassured values biased by a simulated prediction error. Given the predicted signal and the desired quality of smoothed PV power, the accumulated energy by the filter should be minimized. By optimizing the filter model, the energy accumulation hence the cost of PV power smoothing can be minimized. However low is the accumulated energy by PV smoothing, it is not for free and pays-off only if a favourable tariff is paid for the smooth PV infeed. Maximum limits of the PV power ramping should be specified by a technical standard. Once the filter model is optimized to meet the ramping limits and the prediction error is known, real accumulation costs can be aggregated, based on the measured GI signal. There is clearly a trade-off between the cost of smoothing and its quality allowing for a corresponding reduction in the grid control costs. Using the measured signal GI(t), it is possible to optimally match the PV ramping standard with the \"smooth PV feed-in tariff\". Measurement of solar irradiance for the sake of PV smoothing must meet the folloowing demands: Capture the full spectrum of solar intermittency with sufficient sampling frequency Replicate the physical properties of planar silicon photovoltaic panels Measure only that fraction of incident radiation, which is intercepted by a tilted PV panel. Actually, the momentary solar irradiance has to be measured at any plane of incidence under given atmospheric conditions. Fulfilling all of these demands is not possible only by measuring the global (GHI) and diffused (dHI) horizontal irradiance (both of which are regularly measured by national weather services). A corresponding measurement system with data logger has been developed and is in operation since 04/2021 at the author's site (48.2\u00b0, 17.1\u00b0). The system consists of 2 units: external console carrying 4 reference PV panels fixed in different angles, and temperature sensors sticked to the panels, internal measurement unit, serving as a MPPT controller, battery charger, heat sink, A/D converter, and data logger. The main system highlights: Four monocrystaline silicon PV panels (sensors) are mounted at different angles. The panels are calibrated by means of Ineichen\u2019s clear-sky model , having its Linke-turbidity factor calibrated by the reference GHI, dHI measured at the near meteorological site. The PV panels are re-calibrated once a year. Temperature sensors are fixed onto each PV panel. The panels are always operated at maximum output power (MPPT) . Their operating point is being dynamically adjusted for the temperature drift of their A-V characteristics and for their internal resistance. The measured output power of each panel is divided by its active surface area and by its (known) efficiency at given surface temperature. The measurement is eventually expressed as \"photovoltaic global irradiance\" in W/m2 analogous to GI measured at given angle of the plane of incidence, but taking into account the spectral and reflexion properties of PV panels. Data logger samples GI with a dynamic frequency. The sampling period ranges from 0.5 second to 10 minutes, according to the solar intermittency. This captures the whole spectrum of solar intermittency, but eliminates the redundancy in stored data. Several years of such an irregular time series can be stored in a relational database with tablespace <1TB. The off-grid measurement system is self-powered 24 hours x 7 days a week. Except the measurement, the PV sensors supply power to the data logger and charge its backup accumulator. The system requires a minimum maintenance. Simultaneous measurement of GI in 4 fixed normal angles allows an accurate interpolation of GI at any plane of incidence pointing its normal vector among the 4 fixed normal vectors (intra-normal area). Daily profiles (12 h) of photovoltaic GI [W/m2] measured at 4 fixed planes. GHI corresponds to the horizontal plane and extrapolated GNI corresponds to a virtual solar-tracked plane of incidence. Its normal vector points to the extra-normal area in winter while the solar elevation is lower than the elevation of the 4 fixed normal vectors. The approximated GNI is therefore less accurate in winter. Daily temperature profiles (24 h) at PV surfaces, and the ambient temperature. The PV surface's temperature is affected by the ambient temperature, solar radiation, and by the wind. The ambient temperature is higher than the sky temperature, so the PV pnales are always cooled by their own radiation. This effect can be observed in the night when the panels are not exposed to solar radiation.","title":"Photovoltaic intermitency"},{"location":"pv_log/#photovoltaic-intermittency-and-its-measurement","text":"","title":"Photovoltaic intermittency and its measurement"},{"location":"pv_log/#impact-on-the-grid","text":"Intermittency of solar irradiance causes that time course of photovoltaic (PV) power generation is unstable over time. As the share of PV energy in the grid increases, the intermittency of solar power is posing still higher risk to the power quality and grid's stability. To mitigate the temporary unbalance between PV infeed and power consumption, a grid operator sets PV generators off-grid (or at least to a low efficiency mode) while the solar intermittency is strong. For example, the losses of intermittent PV energy were 7% in 2011 in the US state Arizona. This loss-rate is determined by the stratospheric solar intermittency and by the level of PV energy penetration in the grid: The higher PV penetration, the higher relative(!) losses due to the intermittency. Extra grid-control costs are raised by the PV intermittency. This overall impact has been projected to the last guaranteed feed-in tariff for new PV installations in Germany: In 2020, a new feed-in tariff was only about 1/3 of the purchase tariff. The state guarantee has been canceled as of 2021, and there is no more doubt that only technical innovations can further augment the share of PV energy in the grid: Smoothing of PV power could eliminate the losses of intermitent PV energy and of additional grid control costs. A smooth time course of renewable power can easily be complemented by other resources (e.g. gas- and water turbines), which is impossible with the rapidly-intermittent renewable power. On the other hand, the loss-free PV smoothing takes up expensive accumulation capacity, otherwise usable as energy storage. We will analyze and optimize the application of a low-pass filter for smoothing the PV power on days with solar intermittency.","title":"Impact on the grid"},{"location":"pv_log/#measurement-of-global-irradiance","text":"Accurate measurement of global irradiance (GI) is a prerequisite for PV smoothing: Accurate short-term forecasting (nowcasting) of PV power is crucial to minimize the accumulation of energy in PV power smoothing. PV power predictors are based on artificial intelligence (AI) and they can be trained by a sky-imagery and by the measured signal GI(t), in particular by its fraction intercepted by a tilted PV panel. By means of the measured signal GI(t), we can excite a low-pass filter by \"ex-post predicted\" input signal GIf(t+\u0394t), as if its GIf values were the meassured values biased by a simulated prediction error. Given the predicted signal and the desired quality of smoothed PV power, the accumulated energy by the filter should be minimized. By optimizing the filter model, the energy accumulation hence the cost of PV power smoothing can be minimized. However low is the accumulated energy by PV smoothing, it is not for free and pays-off only if a favourable tariff is paid for the smooth PV infeed. Maximum limits of the PV power ramping should be specified by a technical standard. Once the filter model is optimized to meet the ramping limits and the prediction error is known, real accumulation costs can be aggregated, based on the measured GI signal. There is clearly a trade-off between the cost of smoothing and its quality allowing for a corresponding reduction in the grid control costs. Using the measured signal GI(t), it is possible to optimally match the PV ramping standard with the \"smooth PV feed-in tariff\". Measurement of solar irradiance for the sake of PV smoothing must meet the folloowing demands: Capture the full spectrum of solar intermittency with sufficient sampling frequency Replicate the physical properties of planar silicon photovoltaic panels Measure only that fraction of incident radiation, which is intercepted by a tilted PV panel. Actually, the momentary solar irradiance has to be measured at any plane of incidence under given atmospheric conditions. Fulfilling all of these demands is not possible only by measuring the global (GHI) and diffused (dHI) horizontal irradiance (both of which are regularly measured by national weather services). A corresponding measurement system with data logger has been developed and is in operation since 04/2021 at the author's site (48.2\u00b0, 17.1\u00b0). The system consists of 2 units: external console carrying 4 reference PV panels fixed in different angles, and temperature sensors sticked to the panels, internal measurement unit, serving as a MPPT controller, battery charger, heat sink, A/D converter, and data logger. The main system highlights: Four monocrystaline silicon PV panels (sensors) are mounted at different angles. The panels are calibrated by means of Ineichen\u2019s clear-sky model , having its Linke-turbidity factor calibrated by the reference GHI, dHI measured at the near meteorological site. The PV panels are re-calibrated once a year. Temperature sensors are fixed onto each PV panel. The panels are always operated at maximum output power (MPPT) . Their operating point is being dynamically adjusted for the temperature drift of their A-V characteristics and for their internal resistance. The measured output power of each panel is divided by its active surface area and by its (known) efficiency at given surface temperature. The measurement is eventually expressed as \"photovoltaic global irradiance\" in W/m2 analogous to GI measured at given angle of the plane of incidence, but taking into account the spectral and reflexion properties of PV panels. Data logger samples GI with a dynamic frequency. The sampling period ranges from 0.5 second to 10 minutes, according to the solar intermittency. This captures the whole spectrum of solar intermittency, but eliminates the redundancy in stored data. Several years of such an irregular time series can be stored in a relational database with tablespace <1TB. The off-grid measurement system is self-powered 24 hours x 7 days a week. Except the measurement, the PV sensors supply power to the data logger and charge its backup accumulator. The system requires a minimum maintenance. Simultaneous measurement of GI in 4 fixed normal angles allows an accurate interpolation of GI at any plane of incidence pointing its normal vector among the 4 fixed normal vectors (intra-normal area). Daily profiles (12 h) of photovoltaic GI [W/m2] measured at 4 fixed planes. GHI corresponds to the horizontal plane and extrapolated GNI corresponds to a virtual solar-tracked plane of incidence. Its normal vector points to the extra-normal area in winter while the solar elevation is lower than the elevation of the 4 fixed normal vectors. The approximated GNI is therefore less accurate in winter. Daily temperature profiles (24 h) at PV surfaces, and the ambient temperature. The PV surface's temperature is affected by the ambient temperature, solar radiation, and by the wind. The ambient temperature is higher than the sky temperature, so the PV pnales are always cooled by their own radiation. This effect can be observed in the night when the panels are not exposed to solar radiation.","title":"Measurement of global irradiance"},{"location":"pv_smooth/","text":"Smoothing of PV power intermittency Energy balancing between the grid and the battery may eliminate the PV intermittency almost loss-free. The objective of a loss-free smoothing is to meet the maximum ramping limits of PV power (allowed by a relevant technical standard) while accumulating the minimum possible energy by the filter. If the smooth PV power is generated by a low-pass filter (LPF) excited by the electrical output of PV panels, such a power filter induces high accumulation costs due to its time lag (group delay in its frequency response). The time lag could be eliminated, if LPF was excited by the future PV power signal. Unfortunately, the short-time PV prediction (nowcasting) is not exact and its error dramatically increases the accumulated energy by the LPF. Recently, various predictive filters (e.g. zero group-delay filter , Kalman filter , moving average, moving median, etc.) have been developed to avoid the accumulation of PV energy due to the LPF time lag and the nowcasting error. Nevertheless, the accumulation of PV power and its cost induced by the predictive filters still exceed the production cost of e.g. nuclear electricity. The advantage of predictive filters is that they integrate the predictor and LPF into a same entity, but their disadvantage is that the predictor is trained by a limited information carried by the signal GI(t). We focus our analysis on the application of a standard LPF excited by a PV predictor trained by the sky imagery and GI(t) signals: Figure 1: Smoothing of PV power by a low-pass filter In the schematic diagram on Figure 1, PV power plant (PVPP) is connected to the grid and its intermittent PV power p(t) is accumulated or compensated (i.e. smoothed) by the accumulator (BESS). The smoothing power is actuated by a bi-directional inverter AC/DC. It is determined by the ouput signal p(t)-s(t+\u0394t) of a differencer. Positive sign of the smoothing power is oriented from the grid to BESS. Hence the total power superimposed to the grid by PVPP and BESS is determined by the filter\u2019s output signal s(t+\u0394t). For the simplification, PVPP and BESS are single-phase-connected to the grid. We will further consider 4 different smoothing methods: In case of LPF smoothing, the measured signal p(t) would bypass the predictor, directly exciting LPF. In theory, ideal predictive smoothing IPLPF would excite LPF by the exact future PV power signal p(t+\u0394t) where the time advance \u0394t is absolutely equal to the LPF's group delay at frequencies f<<fc, and fc is the cut-off frequency of LPF. The smooth power signal s(t+\u0394t) would be the response of LPF to the input signal p(t+\u0394t). According to the schematic diagram, PLPF smoothing method excites LPF by a predicted PV power signal pf(t+\u0394t). Its predictor is trained by the sky-imagery signal and by the measured PV power p(t). Eventually, a smart smoothing method SPLPF (patent pending) has been designed, integrating the filter with the PV predictor which is trained by the sky-imagery signal and by the measured PV power p(t). This method uses a modified scheme. Accumulation of energy by smoothing For simplicity of analysis, the energy losses in AC/DC conversion and accumulation are neglected. Time course of the accumulated energy by ESS: SOC(t)=\\int_{0}^t (p(\\tau)-s(\\tau+\\Delta t))d\\tau\\ \\ \\ \\ \\ \\ \\ \\ \\ (1) defines the change of its state-of-charge [Wh] since time=0 until time=t, while SOC may acquire both positive and negative values. (Always-positive SOC values can be technically managed in ESS.) The time advance \u0394t reduces absolute values of the integrated function. The above-defined time advance \u0394t ensures that following technical criteria are satisfied: Mean value of SOC is near to zero: {1 \\over T} \\int_{0}^T SOC (t) dt \u2248 0\\ \\ \\ \\ \\ \\ \\ \\ \\ (2) Mean quadratic deviation of SOC is near to minimum: {1 \\over T} \\int_{0}^T SOC^2 (t) dt \u2248 min\\ \\ \\ \\ \\ \\ \\ \\ \\ (3) Hence near-to-minimum required accumulaton capacity per cycle: \\Delta SOC = max(SOC) \u2013 min(SOC) \u2248 min\\ \\ \\ \\ \\ \\ \\ \\ \\ (4) The value \u0394SOC should be predicted and ESS must be charged to \u0394SOC/2 at the begining of each cycle T (24 hours in case of PV energy) in order to always keep SOC\u22650. Eventually, near-to-minimum throughput of accumulated energy per cycle is achieved by \u0394t: {1 \\over 2} \\int_{0}^T|p(\\tau)-s(\\tau+\\Delta t)|d \\tau \u2248 min\\ \\ \\ \\ \\ \\ \\ \\ \\ (5) The rate of accumulation is expressed by (4) and (5) which are minimized by \u0394t during a working cycle T. The rate of accumulation is also expressed by the extreme ESS power demand p(\u03c4)-s(\u03c4+\u0394t) during a sudden loss or peak of direct sunlight. This value results from the installed power of PVPP. Let us assume that PV power is proportional to the global solar irradiance GI [W/m2]. In our experiment, the solar irradiance is intercepted by a planar panel 20 cm x 16 cm on the earth\u2019s surface at latitude=48.2\u00b0N, longitude=17.1\u00b0E, with the plane of incidence elevated by 47\u00b0, south-oriented. At this point it should be mentioned that the spectrum of a real PV power is smoother than the spectrum of GI(t), as the surface area of PV plane acts like a moving-average filter. Unfortunately, the size and speed of clouds prevents a true smoothing effect from being achieved. By assuming the proportionality between the PV power p(t) and the global irradiance GI(t), we analyze the worst case of solar intermittency. Let us substitute the signals p(\u03c4), s(\u03c4+\u0394t) in (1) by the measured signal GI(\u03c4) and by its \u201cpredicted-and-smoothed\u201d counterpart GIs(\u03c4+\u0394t). After substituting, the expression (1) computes the time course of specific accumulated energy GX(t) [Wh/m2] by the filter. Ideal smoothing (IPLPF) We simulate the operation of ideal predictive PV smoothing (IPLPF) by means of LPF excited by the exact future signal GI(t+\u0394t) where GI(t) is measured and the time advance \u0394t (given by the LPF group delay) eliminates the filter\u2019s time lag. In theory, such a \"ex post\" simulated smoothing would minimize the accumulation of energy by the filter. This analysis aims to reveal the theoretical potential and affordability of PV smoothing. The numeric experiment is based on the measured solar irradiance over a period of 1 year, assuming contemporary prices of Lithium-Ion accumulators and EDLC supercapacitors. The measured time series GI(t) eventually allows to calculate the specific accumulator\u2019s capacity [Wh/m2], its specific power [W/m2], specific energy throughput [Wh/m2/day], [Wh/m2/year] requested by the IPLPF smoothing. Based on the accumulators\u2019 specifications and prices in 2021, the corresponding accumulation costs have been calculated. This confirmed that the IPLPF operation is definitely worthwhile with the German power purchase tariff and PV feed-in tariff in 2021. The ideal smoothing costs are substantially lower than the difference between purchase tariff and PV feed-in tariff. (We may assume that the smooth PV infeed partially compensates for the distribution costs.) The simulation suggests an affordable smoothing model for a hybrid small-scale PV plant, and suggests the accumulation technology for large-scale PV plants. Smoothing by IPLPF vs LPF Global irradiance GI measured (legend meas), filtered by LPF (legend lp) and by IPLPF (legend aavg0), and specific accumulated energy GX: The left graph shows the measured and low-passed (legend \u201clp\u201d) GI signals on a day with high solar exposure and strong intermittency. The graph on the right shows the specific accumulated energy GX [Wh/m2] by IPLPF vs. LPF on the same day. The time course of GX is proportional to the battery's state of charge SOC [Wh]. Exactly-predicted input signal shifts the IPLPF output to the left (legend \u201caavg0\u201d), minimizing the standard deviation of SOC, thus in practise minimizing the difference \u0394SOC = max(SOC) \u2013 min(SOC) which is the requested accumulation capacity. The throughput of accumulated energy (other than \u0394SOC) is also minimized by IPLPF. Costs of IPLPF smoothing The smoothing costs result from the energy accumulation. Accumulation costs are given by the rate of accumulation and the technology (e.g. Lithium-Ion RedOx, EDLC supercapacitor etc.). In theory, the accumulation rate is given by the intermittency of solar irradiance vs. desired time course of the output PV power. The accumulation rate is quantified by: mandated ESS capacity, i.e. \u0394SOC [Wh] reserved for smoothing (4) total accumulated energy throughput [Wh] by smoothing (5) maximum power [W] to/from ESS, balancing the intermittent PV power In practice, the values 1. and 2. are larger the more imperfectly the balancing power between the grid and the battery is controlled. In the illustrated example, IPLPF needs only 24% \u0394SOC relative to LPF, and IPLPF accumulates about 50% of the energy throughput if compared to LPF. Both \u0394SOC and energy throughput reach their theoretical minimum by means of IPLPF smoothing. The higher LPF order or its lower cut-off frequency, the smoother output, but \"earlier\" input signal needed to eliminate the filter's time lag. (In case of PLPF smoothing: The greater \u0394t, the greater prediction error and the greater rate of accumulation.) The IPLPF simulation has confirmed that a hybrid PV system i.e. a small-scale on-grid PV plant having its own BESS with capacity = 2 hours x Ppvmax, need <10% of the BESS capacity to be reserved for smoothing (7% on 2022-03-04), while the rest BESS capacity is used for the energy storage. The hybrid PV plant feeds its \u201coverflow\u201d power into the grid, as long as the household\u2019s consumption is satisfied and the battery has been charged. Having the reserved free capacity and total battery power available, the IPLPF costs are reasonably lower than the expected added value to the smooth PV power infeed. IPLPF costs measured from 04/2021 to 03/2022. The plane of incidence and the LPF applied are the same as in the GI(t) and GX(t) plots: Table 1 Conditions of cost calculation: CapEx of \"Hybrid with BESS\u201d system include 90% of the BESS capacity reserved for storage, 10% for smoothing. 1/3 of the generated PV energy is assumed as infeed to the grid (overflow) by a \"Hybrid with BESS\u201d on-grid system. Li-Ion & supercapacitor (SC): life cycle parameters and prices are as of 2021. Hybrid supercapacitor (HSC): price has been estimated upon relation between Li-Ion and SC prices. The costs are specific per 1 kW of installed PV power. Installed PV power = DC output power of PV plant (before DC/AC conversion) assuming its solar incidence 1kW/m2 (1 Sun). CapEx = initial investment to PV smoothing. OpEx = regular (e.g. yearly) costs necessary for its uninterrupted operation. The greater from (CapEx, interval * OpEx) defines the cost of PV smoothing for a given service interval. However, when the smoothing uses >1 accumulation technologies concurrently, the service interval has to be fixed before calculating OpEx. (Reason: Given the service interval, two technologies with different wear-outs can be optimally mixed.) Hybrid systems and sole PV plants use different cost models, because the sole PV plant uses a mixed accumulation technology for smoothing. Energy losses due to the AC/DC conversion and accumulation were neglected. Applications of IPLPF Small-scale hybrid PV system A household with installed PV power <10kW is connected to the low-voltage grid, having a BESS with energy capacity \u2248 2h x installed PV power. After charging the BESS to a threshold SOC (e.g. 88%), the BESS provides enough power to smooth the PV infeed (overflowing PV power) to the grid for affordable costs, provided that the remaining free BESS capacity is left for smoothing, and additional technical measures avoid the microcycling of BESS. The power intermittency of small scale PV plants has no impact on the grid, unless their concentration in the grid is high. IPLPF technology offers an affordable smoothing of PV power in the grid areas with high concentration of small-scale hybrid PV systems. Suitable accumulators for IPLPF The measured signal GI(t) determines the specific accumulation parameters maximum specific power max|GI(\u03c4)-GIs(\u03c4+\u0394t)| [W/m2] and maximum specific energy \u0394GX=max(GX)-min(GX) [Wh/m2] required for the smoothing by IPLPF method. Although IPLPF shrinks the necessary \u0394GX hence \u0394SOC and the total accumulated throughput to their theoretical minimum, it reciprocally increases the relative smoothing power (Pmax x 1h)/\u0394SOC up to 10C, since no algorithm can supply the missing PV power while the direct Sun beams are temporarily obscured by clouds. The lithium accumulators are cheap, efficient and fast, but not enough powerful for a sole IPLPF smoothing. It is not recommended to charge/draw a Li-Ion battery by a relative power >> 1, otherwise the battery\u2019s life cycle would be curtailed. Such a high relative power is provided by EDLC supercapacitors (SC), but on contrary to Lithium bateries, these do not provide enough cheap capacity to make the IPLPF smoothing affordable. The currently-available electricity accumulation technology does not harmonize with demands of the sole IPLPF smoothing. Actually, the IPLPF demands are well satisfied by a flywheel (FESS) : 1) Its max(SOC) poses no limit to max(P) within demands of IPLPF smoothing. 2) IPLPF accumulates energy only on solar-intermittent days (else no accumulation is needed), and the flywheels only wear out when they are rotating - mainly those with mechanical bearings. Because of unknown prices and life cycle parameters, we calculated neither CapExp, nor OpExp of the flywheel in a role of IPLPF accumulator. However, the native synergy between demands and features identifies the flywheel as a suitable accumulator for IPLPF smoothing. Large-scale PV plant Water pumps provide efficient storage for large scale PV plants (cheaper and cleaner than corresponding BESS), but no power smoothing because the water pumps are too sluggish for such a role. Large-scale PV intermittency can be smoothed by a relatively low accumulation capacity =\u0394SOC and a large relative power up to 10C. Such technical demands are better met by flywheels than by RedOx or EDLC technology. Because of missing FESS prices and wear-out data, we have cost-optimized the IPLPF smoothing for a large-scale PV plant by mixing 2 technologies: SC and HSC concurrently operating during 15 years of service. The future HSC technology is already being developed: hybrid supercapacitor , combining advantages of EDLC & RedOx technologies. Summary of IPLPF One year of the continous GI(t) measurement has confirmed that ideal PV smoothing can be affordable with the current Lithium-Ion technology - if properly implemented in a hybrid PV system (incl. measures against micro-cycling of a battery). Although the HSC technology is yet unavailable, the intensive seek for energy makes it very likely to be soon mature for large-scale installations. Flywheel can be an affordable energy storage in the IPLPF smoothing of PV power. Low accumulated energy by the IPLPF smoothing should motivate the further development of technologies among which accurate nowcasting of PV power and smart filtering of PV power are crucial. Real smoothing of PV power The measured global irradiance signal GI(t) allows not only the simulation of ideal predictive low-pass smoothing (IPLPF), but also the predictive smoothing of PV power (PLPF), exciting a low-pass filter (LPF) by a simulated predicted signal GIf(t+\u0394t). The values GIf are biased by a prediction error. As we show below, this error induces a significant accumulation of energy by PLPF when compared with IPLPF. We simulated the prediction error to the measured GI values in order to statistically represent the real predicted signal GIf(t+\u0394t). Based on the measured signal GI(t), the \"ex-post\" simulation of PLPF allowed us to empirically analyze its smoothing performance and energy accumulation. In addition to PLPF, we have developed a \u201csmart predictive\" low-pass smoothing method (patent pending SPLPF), minimizing the accumulated energy with respect to the real-predicted values GIf exciting the LPF. Finally, we analyzed the performance of four different PV smoothing methods: LPF: Input of LPF is excited by the measured signal GI(t) IPLPF: Input of LPF is excited by the measured, optimally left-shifted signal GI(t+\u0394t) PLPF: Input of LPF is excited by the simulated-predicted signal GIf(t+\u0394t) SPLPF: Power filter is excited by the simulated-predicted signal GIf. Simulation of predicted PV power We simulated the predicted signal GIf(t+\u0394t) from the measured, left-shifted GI signal by interval \u0394t, by smoothing its \"future\" time course and by superimposing a random error to its \"future\" value with respect to the fundamental properties of PV predictors: as the advance \u0394t increases, the (unwanted) smoothing of the predicted signal GIf strengthens as the advance \u0394t increases, the impact of random error on GIf increases (statistically cumulates) Both errors are applied at the \"future\" time t+\u0394t whereas \u0394t is given by the demanded smoothing quality. \u0394t matches with the group delay which is controlled by the order and cut-off frequency of LPF. In the simulation, we trim the prediction error by 2 quantitative (OLAP) dimensions: Interval of prediction, after passing of which the smoothing impact on the predicted signal is strengthened, is defined by the parameter smooth_int [minute]. The shorter this interval, the steeper the smoothing effect rises towards predicted future. Standard deviation of the random prediction error (dimensionless parameter SE). A random value is superimposed to future GI values. This is re-generated each time after passing a 6-minute interval of prediction. Hence the impact of random error on GIf(t+\u0394t) statistically cumulates over the prediction time. GI predictors with two different accuracies have been simulated: \u201cBetter prediction accuracy\u201d: smooth_int = 6 minutes, SE = 0.05 \"Worse prediction accuracy\": smooth_int = 3 minutets, SE = 0.1. For each method, the smoothing quality and the rate of accumulation were analyzed by means of LPF orders 1 to 4. Filters of different orders are tuned to generate equivalent smoothing effects, provided that the filters of different orders are excited by the measured, optimally shifted input signal (like in IPLPF case). When this tuning rule is followed, increasing the order of the LPF increases its cutoff frequency, while the optimal advance \u0394t increases only slightly. Smoothing of PV power during a day with strong solar intermittency was analyzed by the four above-listed smoothing methods: The results of analysis have been tabelized and plotted. The impact of prediction error (see Figure 2, Figure 6) exhibits the following empiric dependencies of the tracking criteria along the OLAP partial dimensions: Smoothing quality by prediction error Smoothed predicted signal Changing the value of smooth_int affects the power smoothing quality neither by SPLPF nor by PLPF method, while for all parameter values, the SPLPF method provides worse smoothing than the PLPF method (Figure 3, Figure 4, Figure 7, Figure 8). Lowering the value of smooth_int dramatically increases the accumulation rate by the PLPF method, which is always much greater than the accumulation rate by SPLPF method (Figure 5, Figure 9). With the worse prediction accuracy, the PLPF method even exceeds the accumulation rate induced by the LPF method (Figure 9). In the SPLPF method, the accumulation rate increases only slightly and much more slowly than in the PLPF method. Random error in predicted values Increasing of SE parameter does not degrade the smoothing quality by the PLPF method, but it does degrade the smoothing by the SPLPF method (check Figure 7 vs Figure 8), in which the smoothing performance with standard error SE > 0 is always worse than in the PLPF method. Increasing the value of SE parameter significantly increases the accumulation rate by the PLPF method (Figure 5, Figure 9), which is for all values SE > 0 much higher than by the SPLPF method. For some SE values, the PLPF method even exceeds the LPF method in its accumulation rate. The accumulation rate increases only slightly in the SPLPF method, and less so the higher the filter order. Smoothing quality by LPF order Filter order is the third OLAP dimension, impact of which was analyzed together with the prediction error. We analyzed the LPF orders 1 to 4 (figures 10 to 21): Filter order does not affect the smoothing quality of PLPF method and for small filter orders, the smoothing quality of PLPF is better than that of SPLPF. Increasing the filter order from 1 to 3 significantly improves the quality of SPLPF smoothing, given simulated prediction error (Figures 10-12, 16-18). Increasing the filter order only slightly reduces the accumulation rate by PLPF smoothing. The accumulation rate by PLPF is always substantially larger than by SPLPF. Increasing the filter order from 1 to 3 significantly reduces the accumulation rate by SPLPF smoothing, given simulated prediction error (Figures 13-15, 19-21). SPLPF with the optimal filter order at relatively small prediction error achieves the accumulation rate close to the IPLPF method. Summary The signal GI(t) is plotted as measured, predicted, and smoothed by the four different smoothing methods. Finally, a daily time course of the specific accumulated energy GX [Wh/m2] is displayed, corresponding to the smoothing method. Two days with strong solar intermittency have been selected for the simulation: a day with medium solar exposure 3.0 kWh/m2, and a day with high solar exposure 5.9 kWh/m2 (measured at the above-specified plane of incidence). Time advance \u0394t = 30 minutes was applied in order to achieve a desired smoothing effect by a 3rd-order low-pass filter. Accumulation rate by four different smoothing methods has been aggregated, based on the measured GI(t) signal and the simulated predicted signal GIf(t+\u0394t). The results are summarized in Table 2 and Table 3: In the column \"\u0394GX\", a difference between the maximum and minimum specific accumulated energy is calculated by the expression (4). In the column \"Throughput\", a total daily flow of the specific energy through the accumulator is calculated by (5). For a comparison, the daily specific global exposure at the plane of incidence is displayed too. Accumulated energy by smoothing Table 2 . Table 3 With \"better GI prediction accuracy\", the SPLPF smoothing required 21% - 22% of the ESS energy capacity (\u0394GX) used by the LPF method during the selected days, or 24% - 41% of the capacity used by the PLPF method. SPLPF eventually required 1.0 - 1.2 times the ESS capacity used by the IPLPF method. The SPLPF smoothing put 58% - 73% of the energy flow through the accumulator relative to the LPF method, or 75% - 83% of the energy throughput by the PLPF method. SPLPF eventually put 1.0 - 1.1 times more energy through ESS than the IPLPF method. With \"worse GI prediction accuracy\", the SPLPF smoothing required 24% - 33% of the ESS energy capacity (\u0394GX) used by the LPF method during the selected days, or 19% - 28% of the capacity used by the PLPF method. SPLPF eventually required 1.2 - 1.8 times the ESS capacity used by the IPLPF method. The SPLPF method put 59% - 77% of the daily energy flow through the accumulator relative to the LPF method, or 63% - 69% of the energy throughput by the PLPF method. SPLPF eventually put 1.0 - 1.1 times more energy through ESS than the IPLPF method. Although we haven't analyzed the whole year (simulation of GIf is computationally intensive), the analysis of 4 smoothing methods based on 2 days with high solar intermittency, different solar exposures and various prediction error gave the real assumption that SPLPF performs much better than PLPF, and that SPLPF performs close to the ideal smoothing IPLPF with the optimal filter order and provided that the prediction error is relatively low. These empiric results have been also theoretically justified. Graphical display of smoothing Plotted are the measured time-courses of 2 days, both exhibiting the strong solar intermittency. For illustration, various time courses have been plotted to display the smoothing quality by various criteria: Measured GI(t), synchronized with predicted GIf (1 hour zoomed from the daily time course) Measured GI(t) and its smooth counterpart by the prediction accuracy and smoothing method, applying the optimal LPF order Accumulated GX(t) by the prediction accuracy and smoothing method, applying the optimal LPF order Smoothed GI(t) by the filter order and prediction accuracy, using the IPLPF and SPLPF smoothing methods Accumulated GX by the filter order and prediction accuracy, using the IPLPF and SPLPF smoothing methods Smoothing quality by prediction error Day with medium insolation Figure 2: Measured GI synchronized with GIf (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Figure 3: Measured and smoothed GI by 4 different methods; better prediction accuracy Figure 4: Measured and smoothed GI by 4 smoothing methods; worse prediction accuracy Figure 5: Time course of GX accumulated by 4 smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Day with high insolation Figure 6: Measured GI synchronized with GIf (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Figure 7: Measured and smoothed GI by 4 smoothing methods; better prediction accuracy Figure 8: Measured and smoothed GI by 4 smoothing methods; worse prediction accuracy Figure 9: Time course of GX accumulated by 4 smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Smoothing quality by LPF order Day with medium insolation Figure 10: Time course of IPLPF-smoothed GI by filter order Figure 11: Time course of SPLPF-smoothed GI by filter order; better prediction accuracy Figure 12: Time course of SPLPF-smoothed GI by filter order; worse prediction accuracy Figure 13: Time course of IPLPF-accumulated GX by filter order Figure 14: Time course of SPLPF-accumulated GX by filter order; better prediction accuracy Figure 15: Time course of SPLPF-accumulated GX by filter order; worse prediction accuracy . Day with high insolation Figure 16: Time course of IPLPF-smoothed GI by filter order Figure 17: Time course of SPLPF-smoothed GI by filter order; better prediction accuracy Figure 18: Time course of SPLPF-smoothed GI by filter order; worse prediction accuracy Figure 19 Time course of IPLPF-accumulated GX by filter order) Figure 20: Time course of SPLPF-accumulated GX by filter order; better prediction accuracy Figure 21: Time course of SPLPF-accumulated GX by filter order; worse prediction accuracy","title":"Smoothing of PV intermitency"},{"location":"pv_smooth/#smoothing-of-pv-power-intermittency","text":"Energy balancing between the grid and the battery may eliminate the PV intermittency almost loss-free. The objective of a loss-free smoothing is to meet the maximum ramping limits of PV power (allowed by a relevant technical standard) while accumulating the minimum possible energy by the filter. If the smooth PV power is generated by a low-pass filter (LPF) excited by the electrical output of PV panels, such a power filter induces high accumulation costs due to its time lag (group delay in its frequency response). The time lag could be eliminated, if LPF was excited by the future PV power signal. Unfortunately, the short-time PV prediction (nowcasting) is not exact and its error dramatically increases the accumulated energy by the LPF. Recently, various predictive filters (e.g. zero group-delay filter , Kalman filter , moving average, moving median, etc.) have been developed to avoid the accumulation of PV energy due to the LPF time lag and the nowcasting error. Nevertheless, the accumulation of PV power and its cost induced by the predictive filters still exceed the production cost of e.g. nuclear electricity. The advantage of predictive filters is that they integrate the predictor and LPF into a same entity, but their disadvantage is that the predictor is trained by a limited information carried by the signal GI(t). We focus our analysis on the application of a standard LPF excited by a PV predictor trained by the sky imagery and GI(t) signals: Figure 1: Smoothing of PV power by a low-pass filter In the schematic diagram on Figure 1, PV power plant (PVPP) is connected to the grid and its intermittent PV power p(t) is accumulated or compensated (i.e. smoothed) by the accumulator (BESS). The smoothing power is actuated by a bi-directional inverter AC/DC. It is determined by the ouput signal p(t)-s(t+\u0394t) of a differencer. Positive sign of the smoothing power is oriented from the grid to BESS. Hence the total power superimposed to the grid by PVPP and BESS is determined by the filter\u2019s output signal s(t+\u0394t). For the simplification, PVPP and BESS are single-phase-connected to the grid. We will further consider 4 different smoothing methods: In case of LPF smoothing, the measured signal p(t) would bypass the predictor, directly exciting LPF. In theory, ideal predictive smoothing IPLPF would excite LPF by the exact future PV power signal p(t+\u0394t) where the time advance \u0394t is absolutely equal to the LPF's group delay at frequencies f<<fc, and fc is the cut-off frequency of LPF. The smooth power signal s(t+\u0394t) would be the response of LPF to the input signal p(t+\u0394t). According to the schematic diagram, PLPF smoothing method excites LPF by a predicted PV power signal pf(t+\u0394t). Its predictor is trained by the sky-imagery signal and by the measured PV power p(t). Eventually, a smart smoothing method SPLPF (patent pending) has been designed, integrating the filter with the PV predictor which is trained by the sky-imagery signal and by the measured PV power p(t). This method uses a modified scheme.","title":"Smoothing of PV power intermittency"},{"location":"pv_smooth/#accumulation-of-energy-by-smoothing","text":"For simplicity of analysis, the energy losses in AC/DC conversion and accumulation are neglected. Time course of the accumulated energy by ESS: SOC(t)=\\int_{0}^t (p(\\tau)-s(\\tau+\\Delta t))d\\tau\\ \\ \\ \\ \\ \\ \\ \\ \\ (1) defines the change of its state-of-charge [Wh] since time=0 until time=t, while SOC may acquire both positive and negative values. (Always-positive SOC values can be technically managed in ESS.) The time advance \u0394t reduces absolute values of the integrated function. The above-defined time advance \u0394t ensures that following technical criteria are satisfied: Mean value of SOC is near to zero: {1 \\over T} \\int_{0}^T SOC (t) dt \u2248 0\\ \\ \\ \\ \\ \\ \\ \\ \\ (2) Mean quadratic deviation of SOC is near to minimum: {1 \\over T} \\int_{0}^T SOC^2 (t) dt \u2248 min\\ \\ \\ \\ \\ \\ \\ \\ \\ (3) Hence near-to-minimum required accumulaton capacity per cycle: \\Delta SOC = max(SOC) \u2013 min(SOC) \u2248 min\\ \\ \\ \\ \\ \\ \\ \\ \\ (4) The value \u0394SOC should be predicted and ESS must be charged to \u0394SOC/2 at the begining of each cycle T (24 hours in case of PV energy) in order to always keep SOC\u22650. Eventually, near-to-minimum throughput of accumulated energy per cycle is achieved by \u0394t: {1 \\over 2} \\int_{0}^T|p(\\tau)-s(\\tau+\\Delta t)|d \\tau \u2248 min\\ \\ \\ \\ \\ \\ \\ \\ \\ (5) The rate of accumulation is expressed by (4) and (5) which are minimized by \u0394t during a working cycle T. The rate of accumulation is also expressed by the extreme ESS power demand p(\u03c4)-s(\u03c4+\u0394t) during a sudden loss or peak of direct sunlight. This value results from the installed power of PVPP. Let us assume that PV power is proportional to the global solar irradiance GI [W/m2]. In our experiment, the solar irradiance is intercepted by a planar panel 20 cm x 16 cm on the earth\u2019s surface at latitude=48.2\u00b0N, longitude=17.1\u00b0E, with the plane of incidence elevated by 47\u00b0, south-oriented. At this point it should be mentioned that the spectrum of a real PV power is smoother than the spectrum of GI(t), as the surface area of PV plane acts like a moving-average filter. Unfortunately, the size and speed of clouds prevents a true smoothing effect from being achieved. By assuming the proportionality between the PV power p(t) and the global irradiance GI(t), we analyze the worst case of solar intermittency. Let us substitute the signals p(\u03c4), s(\u03c4+\u0394t) in (1) by the measured signal GI(\u03c4) and by its \u201cpredicted-and-smoothed\u201d counterpart GIs(\u03c4+\u0394t). After substituting, the expression (1) computes the time course of specific accumulated energy GX(t) [Wh/m2] by the filter.","title":"Accumulation of energy by smoothing"},{"location":"pv_smooth/#ideal-smoothing-iplpf","text":"We simulate the operation of ideal predictive PV smoothing (IPLPF) by means of LPF excited by the exact future signal GI(t+\u0394t) where GI(t) is measured and the time advance \u0394t (given by the LPF group delay) eliminates the filter\u2019s time lag. In theory, such a \"ex post\" simulated smoothing would minimize the accumulation of energy by the filter. This analysis aims to reveal the theoretical potential and affordability of PV smoothing. The numeric experiment is based on the measured solar irradiance over a period of 1 year, assuming contemporary prices of Lithium-Ion accumulators and EDLC supercapacitors. The measured time series GI(t) eventually allows to calculate the specific accumulator\u2019s capacity [Wh/m2], its specific power [W/m2], specific energy throughput [Wh/m2/day], [Wh/m2/year] requested by the IPLPF smoothing. Based on the accumulators\u2019 specifications and prices in 2021, the corresponding accumulation costs have been calculated. This confirmed that the IPLPF operation is definitely worthwhile with the German power purchase tariff and PV feed-in tariff in 2021. The ideal smoothing costs are substantially lower than the difference between purchase tariff and PV feed-in tariff. (We may assume that the smooth PV infeed partially compensates for the distribution costs.) The simulation suggests an affordable smoothing model for a hybrid small-scale PV plant, and suggests the accumulation technology for large-scale PV plants.","title":"Ideal smoothing (IPLPF)"},{"location":"pv_smooth/#smoothing-by-iplpf-vs-lpf","text":"Global irradiance GI measured (legend meas), filtered by LPF (legend lp) and by IPLPF (legend aavg0), and specific accumulated energy GX: The left graph shows the measured and low-passed (legend \u201clp\u201d) GI signals on a day with high solar exposure and strong intermittency. The graph on the right shows the specific accumulated energy GX [Wh/m2] by IPLPF vs. LPF on the same day. The time course of GX is proportional to the battery's state of charge SOC [Wh]. Exactly-predicted input signal shifts the IPLPF output to the left (legend \u201caavg0\u201d), minimizing the standard deviation of SOC, thus in practise minimizing the difference \u0394SOC = max(SOC) \u2013 min(SOC) which is the requested accumulation capacity. The throughput of accumulated energy (other than \u0394SOC) is also minimized by IPLPF.","title":"Smoothing by IPLPF vs LPF"},{"location":"pv_smooth/#costs-of-iplpf-smoothing","text":"The smoothing costs result from the energy accumulation. Accumulation costs are given by the rate of accumulation and the technology (e.g. Lithium-Ion RedOx, EDLC supercapacitor etc.). In theory, the accumulation rate is given by the intermittency of solar irradiance vs. desired time course of the output PV power. The accumulation rate is quantified by: mandated ESS capacity, i.e. \u0394SOC [Wh] reserved for smoothing (4) total accumulated energy throughput [Wh] by smoothing (5) maximum power [W] to/from ESS, balancing the intermittent PV power In practice, the values 1. and 2. are larger the more imperfectly the balancing power between the grid and the battery is controlled. In the illustrated example, IPLPF needs only 24% \u0394SOC relative to LPF, and IPLPF accumulates about 50% of the energy throughput if compared to LPF. Both \u0394SOC and energy throughput reach their theoretical minimum by means of IPLPF smoothing. The higher LPF order or its lower cut-off frequency, the smoother output, but \"earlier\" input signal needed to eliminate the filter's time lag. (In case of PLPF smoothing: The greater \u0394t, the greater prediction error and the greater rate of accumulation.) The IPLPF simulation has confirmed that a hybrid PV system i.e. a small-scale on-grid PV plant having its own BESS with capacity = 2 hours x Ppvmax, need <10% of the BESS capacity to be reserved for smoothing (7% on 2022-03-04), while the rest BESS capacity is used for the energy storage. The hybrid PV plant feeds its \u201coverflow\u201d power into the grid, as long as the household\u2019s consumption is satisfied and the battery has been charged. Having the reserved free capacity and total battery power available, the IPLPF costs are reasonably lower than the expected added value to the smooth PV power infeed. IPLPF costs measured from 04/2021 to 03/2022. The plane of incidence and the LPF applied are the same as in the GI(t) and GX(t) plots: Table 1","title":"Costs of IPLPF smoothing"},{"location":"pv_smooth/#conditions-of-cost-calculation","text":"CapEx of \"Hybrid with BESS\u201d system include 90% of the BESS capacity reserved for storage, 10% for smoothing. 1/3 of the generated PV energy is assumed as infeed to the grid (overflow) by a \"Hybrid with BESS\u201d on-grid system. Li-Ion & supercapacitor (SC): life cycle parameters and prices are as of 2021. Hybrid supercapacitor (HSC): price has been estimated upon relation between Li-Ion and SC prices. The costs are specific per 1 kW of installed PV power. Installed PV power = DC output power of PV plant (before DC/AC conversion) assuming its solar incidence 1kW/m2 (1 Sun). CapEx = initial investment to PV smoothing. OpEx = regular (e.g. yearly) costs necessary for its uninterrupted operation. The greater from (CapEx, interval * OpEx) defines the cost of PV smoothing for a given service interval. However, when the smoothing uses >1 accumulation technologies concurrently, the service interval has to be fixed before calculating OpEx. (Reason: Given the service interval, two technologies with different wear-outs can be optimally mixed.) Hybrid systems and sole PV plants use different cost models, because the sole PV plant uses a mixed accumulation technology for smoothing. Energy losses due to the AC/DC conversion and accumulation were neglected.","title":"Conditions of cost calculation:"},{"location":"pv_smooth/#applications-of-iplpf","text":"","title":"Applications of IPLPF"},{"location":"pv_smooth/#small-scale-hybrid-pv-system","text":"A household with installed PV power <10kW is connected to the low-voltage grid, having a BESS with energy capacity \u2248 2h x installed PV power. After charging the BESS to a threshold SOC (e.g. 88%), the BESS provides enough power to smooth the PV infeed (overflowing PV power) to the grid for affordable costs, provided that the remaining free BESS capacity is left for smoothing, and additional technical measures avoid the microcycling of BESS. The power intermittency of small scale PV plants has no impact on the grid, unless their concentration in the grid is high. IPLPF technology offers an affordable smoothing of PV power in the grid areas with high concentration of small-scale hybrid PV systems.","title":"Small-scale hybrid PV system"},{"location":"pv_smooth/#suitable-accumulators-for-iplpf","text":"The measured signal GI(t) determines the specific accumulation parameters maximum specific power max|GI(\u03c4)-GIs(\u03c4+\u0394t)| [W/m2] and maximum specific energy \u0394GX=max(GX)-min(GX) [Wh/m2] required for the smoothing by IPLPF method. Although IPLPF shrinks the necessary \u0394GX hence \u0394SOC and the total accumulated throughput to their theoretical minimum, it reciprocally increases the relative smoothing power (Pmax x 1h)/\u0394SOC up to 10C, since no algorithm can supply the missing PV power while the direct Sun beams are temporarily obscured by clouds. The lithium accumulators are cheap, efficient and fast, but not enough powerful for a sole IPLPF smoothing. It is not recommended to charge/draw a Li-Ion battery by a relative power >> 1, otherwise the battery\u2019s life cycle would be curtailed. Such a high relative power is provided by EDLC supercapacitors (SC), but on contrary to Lithium bateries, these do not provide enough cheap capacity to make the IPLPF smoothing affordable. The currently-available electricity accumulation technology does not harmonize with demands of the sole IPLPF smoothing. Actually, the IPLPF demands are well satisfied by a flywheel (FESS) : 1) Its max(SOC) poses no limit to max(P) within demands of IPLPF smoothing. 2) IPLPF accumulates energy only on solar-intermittent days (else no accumulation is needed), and the flywheels only wear out when they are rotating - mainly those with mechanical bearings. Because of unknown prices and life cycle parameters, we calculated neither CapExp, nor OpExp of the flywheel in a role of IPLPF accumulator. However, the native synergy between demands and features identifies the flywheel as a suitable accumulator for IPLPF smoothing.","title":"Suitable accumulators for IPLPF"},{"location":"pv_smooth/#large-scale-pv-plant","text":"Water pumps provide efficient storage for large scale PV plants (cheaper and cleaner than corresponding BESS), but no power smoothing because the water pumps are too sluggish for such a role. Large-scale PV intermittency can be smoothed by a relatively low accumulation capacity =\u0394SOC and a large relative power up to 10C. Such technical demands are better met by flywheels than by RedOx or EDLC technology. Because of missing FESS prices and wear-out data, we have cost-optimized the IPLPF smoothing for a large-scale PV plant by mixing 2 technologies: SC and HSC concurrently operating during 15 years of service. The future HSC technology is already being developed: hybrid supercapacitor , combining advantages of EDLC & RedOx technologies.","title":"Large-scale PV plant"},{"location":"pv_smooth/#summary-of-iplpf","text":"One year of the continous GI(t) measurement has confirmed that ideal PV smoothing can be affordable with the current Lithium-Ion technology - if properly implemented in a hybrid PV system (incl. measures against micro-cycling of a battery). Although the HSC technology is yet unavailable, the intensive seek for energy makes it very likely to be soon mature for large-scale installations. Flywheel can be an affordable energy storage in the IPLPF smoothing of PV power. Low accumulated energy by the IPLPF smoothing should motivate the further development of technologies among which accurate nowcasting of PV power and smart filtering of PV power are crucial.","title":"Summary of IPLPF"},{"location":"pv_smooth/#real-smoothing-of-pv-power","text":"The measured global irradiance signal GI(t) allows not only the simulation of ideal predictive low-pass smoothing (IPLPF), but also the predictive smoothing of PV power (PLPF), exciting a low-pass filter (LPF) by a simulated predicted signal GIf(t+\u0394t). The values GIf are biased by a prediction error. As we show below, this error induces a significant accumulation of energy by PLPF when compared with IPLPF. We simulated the prediction error to the measured GI values in order to statistically represent the real predicted signal GIf(t+\u0394t). Based on the measured signal GI(t), the \"ex-post\" simulation of PLPF allowed us to empirically analyze its smoothing performance and energy accumulation. In addition to PLPF, we have developed a \u201csmart predictive\" low-pass smoothing method (patent pending SPLPF), minimizing the accumulated energy with respect to the real-predicted values GIf exciting the LPF. Finally, we analyzed the performance of four different PV smoothing methods: LPF: Input of LPF is excited by the measured signal GI(t) IPLPF: Input of LPF is excited by the measured, optimally left-shifted signal GI(t+\u0394t) PLPF: Input of LPF is excited by the simulated-predicted signal GIf(t+\u0394t) SPLPF: Power filter is excited by the simulated-predicted signal GIf.","title":"Real smoothing of PV power"},{"location":"pv_smooth/#simulation-of-predicted-pv-power","text":"We simulated the predicted signal GIf(t+\u0394t) from the measured, left-shifted GI signal by interval \u0394t, by smoothing its \"future\" time course and by superimposing a random error to its \"future\" value with respect to the fundamental properties of PV predictors: as the advance \u0394t increases, the (unwanted) smoothing of the predicted signal GIf strengthens as the advance \u0394t increases, the impact of random error on GIf increases (statistically cumulates) Both errors are applied at the \"future\" time t+\u0394t whereas \u0394t is given by the demanded smoothing quality. \u0394t matches with the group delay which is controlled by the order and cut-off frequency of LPF. In the simulation, we trim the prediction error by 2 quantitative (OLAP) dimensions: Interval of prediction, after passing of which the smoothing impact on the predicted signal is strengthened, is defined by the parameter smooth_int [minute]. The shorter this interval, the steeper the smoothing effect rises towards predicted future. Standard deviation of the random prediction error (dimensionless parameter SE). A random value is superimposed to future GI values. This is re-generated each time after passing a 6-minute interval of prediction. Hence the impact of random error on GIf(t+\u0394t) statistically cumulates over the prediction time. GI predictors with two different accuracies have been simulated: \u201cBetter prediction accuracy\u201d: smooth_int = 6 minutes, SE = 0.05 \"Worse prediction accuracy\": smooth_int = 3 minutets, SE = 0.1. For each method, the smoothing quality and the rate of accumulation were analyzed by means of LPF orders 1 to 4. Filters of different orders are tuned to generate equivalent smoothing effects, provided that the filters of different orders are excited by the measured, optimally shifted input signal (like in IPLPF case). When this tuning rule is followed, increasing the order of the LPF increases its cutoff frequency, while the optimal advance \u0394t increases only slightly. Smoothing of PV power during a day with strong solar intermittency was analyzed by the four above-listed smoothing methods: The results of analysis have been tabelized and plotted. The impact of prediction error (see Figure 2, Figure 6) exhibits the following empiric dependencies of the tracking criteria along the OLAP partial dimensions:","title":"Simulation of predicted PV power"},{"location":"pv_smooth/#smoothing-quality-by-prediction-error","text":"","title":"Smoothing quality by prediction error"},{"location":"pv_smooth/#smoothed-predicted-signal","text":"Changing the value of smooth_int affects the power smoothing quality neither by SPLPF nor by PLPF method, while for all parameter values, the SPLPF method provides worse smoothing than the PLPF method (Figure 3, Figure 4, Figure 7, Figure 8). Lowering the value of smooth_int dramatically increases the accumulation rate by the PLPF method, which is always much greater than the accumulation rate by SPLPF method (Figure 5, Figure 9). With the worse prediction accuracy, the PLPF method even exceeds the accumulation rate induced by the LPF method (Figure 9). In the SPLPF method, the accumulation rate increases only slightly and much more slowly than in the PLPF method.","title":"Smoothed predicted signal"},{"location":"pv_smooth/#random-error-in-predicted-values","text":"Increasing of SE parameter does not degrade the smoothing quality by the PLPF method, but it does degrade the smoothing by the SPLPF method (check Figure 7 vs Figure 8), in which the smoothing performance with standard error SE > 0 is always worse than in the PLPF method. Increasing the value of SE parameter significantly increases the accumulation rate by the PLPF method (Figure 5, Figure 9), which is for all values SE > 0 much higher than by the SPLPF method. For some SE values, the PLPF method even exceeds the LPF method in its accumulation rate. The accumulation rate increases only slightly in the SPLPF method, and less so the higher the filter order.","title":"Random error in predicted values"},{"location":"pv_smooth/#smoothing-quality-by-lpf-order","text":"Filter order is the third OLAP dimension, impact of which was analyzed together with the prediction error. We analyzed the LPF orders 1 to 4 (figures 10 to 21): Filter order does not affect the smoothing quality of PLPF method and for small filter orders, the smoothing quality of PLPF is better than that of SPLPF. Increasing the filter order from 1 to 3 significantly improves the quality of SPLPF smoothing, given simulated prediction error (Figures 10-12, 16-18). Increasing the filter order only slightly reduces the accumulation rate by PLPF smoothing. The accumulation rate by PLPF is always substantially larger than by SPLPF. Increasing the filter order from 1 to 3 significantly reduces the accumulation rate by SPLPF smoothing, given simulated prediction error (Figures 13-15, 19-21). SPLPF with the optimal filter order at relatively small prediction error achieves the accumulation rate close to the IPLPF method.","title":"Smoothing quality by LPF order"},{"location":"pv_smooth/#summary","text":"The signal GI(t) is plotted as measured, predicted, and smoothed by the four different smoothing methods. Finally, a daily time course of the specific accumulated energy GX [Wh/m2] is displayed, corresponding to the smoothing method. Two days with strong solar intermittency have been selected for the simulation: a day with medium solar exposure 3.0 kWh/m2, and a day with high solar exposure 5.9 kWh/m2 (measured at the above-specified plane of incidence). Time advance \u0394t = 30 minutes was applied in order to achieve a desired smoothing effect by a 3rd-order low-pass filter. Accumulation rate by four different smoothing methods has been aggregated, based on the measured GI(t) signal and the simulated predicted signal GIf(t+\u0394t). The results are summarized in Table 2 and Table 3: In the column \"\u0394GX\", a difference between the maximum and minimum specific accumulated energy is calculated by the expression (4). In the column \"Throughput\", a total daily flow of the specific energy through the accumulator is calculated by (5). For a comparison, the daily specific global exposure at the plane of incidence is displayed too.","title":"Summary"},{"location":"pv_smooth/#accumulated-energy-by-smoothing","text":"Table 2 . Table 3 With \"better GI prediction accuracy\", the SPLPF smoothing required 21% - 22% of the ESS energy capacity (\u0394GX) used by the LPF method during the selected days, or 24% - 41% of the capacity used by the PLPF method. SPLPF eventually required 1.0 - 1.2 times the ESS capacity used by the IPLPF method. The SPLPF smoothing put 58% - 73% of the energy flow through the accumulator relative to the LPF method, or 75% - 83% of the energy throughput by the PLPF method. SPLPF eventually put 1.0 - 1.1 times more energy through ESS than the IPLPF method. With \"worse GI prediction accuracy\", the SPLPF smoothing required 24% - 33% of the ESS energy capacity (\u0394GX) used by the LPF method during the selected days, or 19% - 28% of the capacity used by the PLPF method. SPLPF eventually required 1.2 - 1.8 times the ESS capacity used by the IPLPF method. The SPLPF method put 59% - 77% of the daily energy flow through the accumulator relative to the LPF method, or 63% - 69% of the energy throughput by the PLPF method. SPLPF eventually put 1.0 - 1.1 times more energy through ESS than the IPLPF method. Although we haven't analyzed the whole year (simulation of GIf is computationally intensive), the analysis of 4 smoothing methods based on 2 days with high solar intermittency, different solar exposures and various prediction error gave the real assumption that SPLPF performs much better than PLPF, and that SPLPF performs close to the ideal smoothing IPLPF with the optimal filter order and provided that the prediction error is relatively low. These empiric results have been also theoretically justified.","title":"Accumulated energy by smoothing"},{"location":"pv_smooth/#graphical-display-of-smoothing","text":"Plotted are the measured time-courses of 2 days, both exhibiting the strong solar intermittency. For illustration, various time courses have been plotted to display the smoothing quality by various criteria: Measured GI(t), synchronized with predicted GIf (1 hour zoomed from the daily time course) Measured GI(t) and its smooth counterpart by the prediction accuracy and smoothing method, applying the optimal LPF order Accumulated GX(t) by the prediction accuracy and smoothing method, applying the optimal LPF order Smoothed GI(t) by the filter order and prediction accuracy, using the IPLPF and SPLPF smoothing methods Accumulated GX by the filter order and prediction accuracy, using the IPLPF and SPLPF smoothing methods","title":"Graphical display of smoothing"},{"location":"pv_smooth/#smoothing-quality-by-prediction-error_1","text":"","title":"Smoothing quality by prediction error"},{"location":"pv_smooth/#day-with-medium-insolation","text":"Figure 2: Measured GI synchronized with GIf (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Figure 3: Measured and smoothed GI by 4 different methods; better prediction accuracy Figure 4: Measured and smoothed GI by 4 smoothing methods; worse prediction accuracy Figure 5: Time course of GX accumulated by 4 smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy)","title":"Day with medium insolation"},{"location":"pv_smooth/#day-with-high-insolation","text":"Figure 6: Measured GI synchronized with GIf (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy) Figure 7: Measured and smoothed GI by 4 smoothing methods; better prediction accuracy Figure 8: Measured and smoothed GI by 4 smoothing methods; worse prediction accuracy Figure 9: Time course of GX accumulated by 4 smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy)","title":"Day with high insolation"},{"location":"pv_smooth/#smoothing-quality-by-lpf-order_1","text":"","title":"Smoothing quality by LPF order"},{"location":"pv_smooth/#day-with-medium-insolation_1","text":"Figure 10: Time course of IPLPF-smoothed GI by filter order Figure 11: Time course of SPLPF-smoothed GI by filter order; better prediction accuracy Figure 12: Time course of SPLPF-smoothed GI by filter order; worse prediction accuracy Figure 13: Time course of IPLPF-accumulated GX by filter order Figure 14: Time course of SPLPF-accumulated GX by filter order; better prediction accuracy Figure 15: Time course of SPLPF-accumulated GX by filter order; worse prediction accuracy .","title":"Day with medium insolation"},{"location":"pv_smooth/#day-with-high-insolation_1","text":"Figure 16: Time course of IPLPF-smoothed GI by filter order Figure 17: Time course of SPLPF-smoothed GI by filter order; better prediction accuracy Figure 18: Time course of SPLPF-smoothed GI by filter order; worse prediction accuracy Figure 19 Time course of IPLPF-accumulated GX by filter order) Figure 20: Time course of SPLPF-accumulated GX by filter order; better prediction accuracy Figure 21: Time course of SPLPF-accumulated GX by filter order; worse prediction accuracy","title":"Day with high insolation"},{"location":"v_glossary/","text":"List of abbreviations AC/DC = AC to DC power conversion A/D = analog to digital data conversion AI = artificial intelligence BESS = battery energy storage system CapEx = capital expenditures for PV smoothing [$/kW] DC/AC = DC to AC power conversion (inversion) dHI = diffused horizontal irradiance [W/m2] DHI = direct horizontal irradiance [W/m2] DNI = direct normal irradiance [W/m2] EDLC = electric double layer capacitor (supercapacitor) ESS = energy storage system (unspecified technology) FESS = flywheel energy storage system GHI = global horizontal irradiance [W/m2] GI = global irradiance [W/m2] GIf = forecasted future global irradiance [W/m2] GNI = global normal irradiance [W/m2] GX = specific accumulated energy by filter (GI-corresponding) [Wh]/m2] HSC = hybrid supercapacitor IPLPF = ideal predictive low-pass filter Li-Ion = Lithium-Ion accumulation technology LPF = low-pass filter MPPT = maximum power point tracking OLAP = online analytical processing (of pre-aggregated data) OpEx = operational expenses for PV smoothing [$/kW/year] PLPF = predictive low-pass filter PV = photovoltaic PVPP = photovoltasic power plant RedOx = Reduction-Oxidation accumulation technology SC = supercapacitor SE = standard error SOC = state of charge [Wh] SPLPF = smart predictive low-pass filter \u0394t = advance time interval [minute]","title":"Glossary"},{"location":"v_glossary/#list-of-abbreviations","text":"AC/DC = AC to DC power conversion A/D = analog to digital data conversion AI = artificial intelligence BESS = battery energy storage system CapEx = capital expenditures for PV smoothing [$/kW] DC/AC = DC to AC power conversion (inversion) dHI = diffused horizontal irradiance [W/m2] DHI = direct horizontal irradiance [W/m2] DNI = direct normal irradiance [W/m2] EDLC = electric double layer capacitor (supercapacitor) ESS = energy storage system (unspecified technology) FESS = flywheel energy storage system GHI = global horizontal irradiance [W/m2] GI = global irradiance [W/m2] GIf = forecasted future global irradiance [W/m2] GNI = global normal irradiance [W/m2] GX = specific accumulated energy by filter (GI-corresponding) [Wh]/m2] HSC = hybrid supercapacitor IPLPF = ideal predictive low-pass filter Li-Ion = Lithium-Ion accumulation technology LPF = low-pass filter MPPT = maximum power point tracking OLAP = online analytical processing (of pre-aggregated data) OpEx = operational expenses for PV smoothing [$/kW/year] PLPF = predictive low-pass filter PV = photovoltaic PVPP = photovoltasic power plant RedOx = Reduction-Oxidation accumulation technology SC = supercapacitor SE = standard error SOC = state of charge [Wh] SPLPF = smart predictive low-pass filter \u0394t = advance time interval [minute]","title":"List of abbreviations"}]}