<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://mhrons.github.io/pv_log/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Photovoltaic intermitency and its smoothing - Milan Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Photovoltaic intermitency and its smoothing";
        var mkdocs_page_input_path = "pv_log.md";
        var mkdocs_page_url = "/pv_log/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Milan Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
    <ul>
    <li class="toctree-l2"><a class="reference internal" href="..#commands">Commands</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="..#project-layout">Project layout</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Photovoltaic intermitency and its smoothing</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#impact-of-pv-intermittency-on-grid">Impact of PV intermittency on grid</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#measurement-of-pv-power">Measurement of PV Power</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#smoothing-of-pv-power">Smoothing of PV Power</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#accumulated-energy-by-smoothing">Accumulated energy by smoothing</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ideal-smoothing-of-pv-power-iplpf">Ideal smoothing of PV power (IPLPF)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#smoothing-by-iplpf-vs-lpf">Smoothing by IPLPF vs LPF</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#costs-of-iplpf-smoothing">Costs of IPLPF smoothing</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#applications-of-iplpf">Applications of IPLPF</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#iplpf-summary">IPLPF summary</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#real-smoothing-of-pv-power">Real smoothing of PV power</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#simulation-of-predicted-pv-power">Simulation of predicted PV power</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#smoothing-analyzed-by-prediction-error">Smoothing analyzed by prediction error</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#smoothing-analyzed-by-lpf-order">Smoothing analyzed by LPF order</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#accumulated-energy-by-smoothing_1">Accumulated energy by smoothing</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#graphical-display">Graphical display</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Milan Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Photovoltaic intermitency and its smoothing</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="photovoltaic-intermittency-and-its-smoothing-potential">Photovoltaic intermittency and its smoothing potential</h1>
<h2 id="impact-of-pv-intermittency-on-grid">Impact of PV intermittency on grid</h2>
<p>Intermittency of solar irradiance causes that time course of photovoltaic (PV) power generation is unstable over time. As the share of photovoltaic (PV) energy in the grid increases, the intermittency of solar power is posing still higher risk to power quality and grid's stability. To mitigate the temporary unbalance between PV infeed and power consumption, the grid operator sets PV generators off-grid (or at least to a low efficiency status) while the PV intermittency is high. The PV resources are not fully utilized, and they raise extra strain on the grid regulation. This impact is expressed e.g. by the last guaranteed feed-in tariff for new PV installations in Germany: In 2020, a new feed-in tariff was only about 1/3 of the purchase tariff. The state guarantee has been canceled as of 2021, and there is no more doubt that only technical innovations can further boost the share of PV energy in the grid: Smoothing of PV power could eliminate the losses of intermitent PV energy (7% in Arizona 2011), and adequately reduce additional grid control costs induced by the intermittent PV generators. On the other hand, the loss-free PV smoothing takes up an expensive accumulation capacity otherwise used for energy storage.<br />
We analyzed and optimized methods for the efficient and affordable smoothing of PV power on days with strong solar intermittency.</p>
<h2 id="measurement-of-pv-power">Measurement of PV Power</h2>
<p><strong><em>Accurate photovoltaic measurement is a prerequisite for PV smoothing:</em></strong>  </p>
<ul>
<li>Accurate short-term forecasting (nowcasting) of PV power is crucial to minimize the accumulation of energy by the smoothing. PV power predictors have to be continuously trained by the sky-imagery and by the signal GI(t), in particular by its fraction intercepted by a tilted PV panel.</li>
<li>By means of the measured signal GI(t), we can "ex-post" excite a low-pass filter by a "predicted" input signal GIf(t+Δt), as if its GIf values were biased by a prediction error simulated to reproduce the operation of a real predictor. Given the prediction error and the desired quality of "smoothed" PV power, the accumulated energy by the filter has to be minimized. Thus, we have optimized the low-pass filter model (patent pending), minimizing the accumulation and costs of PV smoothing.</li>
<li>However low is the accumulated energy, the PV smoothing is not for free. It can pay off only if a favourable "smooth feed-in tariff" exists. Ramping limits of the smooth PV infeed should be specified by a technical standard (which currently does not exist). Once the prediction error is known and the filter model is optimized, the real smoothing costs can be calculated by means of the measured GI signal. Hence a trade-off between the smoothing costs and the smoothing quality, defining the corresponding reduction in grid control costs, can be optimized. This is, how the relevant technical standard and the corresponding feed-in tariff can be matched together.</li>
</ul>
<p>Measurement of solar irradiance for the sake of PV smoothing must meet the folloowing demands:</p>
<ul>
<li>Capture the full spectrum of solar intermittency with sufficient sampling frequency</li>
<li>Replicate the physical properties of planar silicon photovoltaic panels</li>
<li>Measure only that fraction of incident radiation, which is intercepted by a tilted PV panel. </li>
</ul>
<p><img align="right" alt="PV console" src="../img/PV_Panels.JPG" width="300" /></p>
<p>Actually, the momentary solar irradiance has to be measured at any plane of incidence under given atmospheric conditions. Fulfilling all of these demands is not possible only by measuring the global (GHI) and diffused (dHI) horizontal irradiance (both of which are regularly measured by national weather services).</p>
<p>A corresponding measurement system and data logger have been developed and is in operation since 04/2021 at the author's site (48.2°, 17.1°).</p>
<p><img align="right" alt="PV_logger" src="../img/PV_Logger.JPG" width="300" /></p>
<p>The system consists of 2 units:</p>
<ol>
<li>external console having 4 reference PV panels fixed in different angles, and temperature sensors sticked to the panels,</li>
<li>internal measurement unit, serving as a MPPT controller, battery charger, heat sink, A/D converter, and data logger.</li>
</ol>
<p>Here are the main system highlights:</p>
<ul>
<li>Four monocrystaline PV panels (sensors) are mounted at different angles. The panels are calibrated by means of Ineichen’s clear-sky model, having its Linke-turbidity factor calibrated by the reference GHI, dHI measured at the near meteorological site. The PV panels are re-calibrated once a year.</li>
<li>Temperature sensors are fixed onto each PV panel. The panels are always operated at maximum output power (MPPT). Their operating point is dynamically adjusted according to the temperature drift of their A-V characteristics and internal resistance. The measured output power of each panel is then divided by its active surface area and by its (known) efficiency at given surface temperature. The measurement is finally expressed as "photovoltaic global irradiance" in W/m2 analogous to GI measured at given angle of the plane of incidence, but taking into account the spectral and optical properties of PV panels.</li>
<li>Data logger operates with a dynamic sampling frequency. This captures the whole spectrum of solar intermittency, but eliminates redundancy in the stored data. The sampling period ranges from 0.5 second to 10 minutes, according to the solar intermittency. Several years of such a irregular time series can be stored in a relational database with tablespace &lt;1TB.</li>
<li>The off-grid measurement system is self-powered 24 hours x 7 days a week. Except the measurement, the PV sensors supply power to the data logger and charge its backup accumulator. The system requires a minimum maintenance.
<img align="right" alt="GI" src="../img/GI.2022-01-15.png" width="300" /></li>
<li>Simultaneous measurement of GI in 4 fixed normal angles allows an accurate interpolation of GI at any plane of incidence pointing with its normal vector among the 4 fixed normal vectors (intra-normal area).</li>
</ul>
<p>Daily profiles (12 h) of photovoltaic GI [W/m2] measured at 4 fixed planes, where GHI corresponds to the horizontal plane and extrapolated GNI corresponds to the virtually solar-tracked plane of incidence. Its normal vector points to the extra-normal area in winter while the solar elevation is lower than the elevation of the 4 fixed normal vectors. The approximated GNI is therefore less accurate in winter.
<img align="right" alt="Cels" src="../img/Cels.2022-01-15.png" width="300" /></p>
<p>Daily temperature profiles (24 h) at PV surfaces, and the ambient temperature. The PV surface temperature is affected by the ambient temperature, solar irradiance (infrared spectrum), and by the wind. The ambient temperature is higher than the sky temperature in the night when the PV panels are cooled by their own radiation.</p>
<p>.<br />
.<br />
.  </p>
<h2 id="smoothing-of-pv-power">Smoothing of PV Power</h2>
<p>Energy balancing between the grid and the battery may eliminate the PV intermittency almost loss-free. The objective of a loss-free smoothing is to meet the maximum allowed ramping limits of PV power (relevant technical standard is expected here) while accumulating the minimum possible energy by the filter. If the smooth PV power is generated by a low-pass filter (LPF) excited by the output of PV panels, such a power filter induces high accumulation costs due to a time lag (group delay) in its response. The time lag could be eliminated, if LPF was excited by the future PV power signal. Unfortunately, the short-time PV prediction (nowcasting) is not exact and its error dramatically increases the accumulated energy by the predictive low-pass filter (PLPF, see schema below). Recently, various smart filtering techniques (e.g. moving average, moving median, Kalman filter etc.) have been developed to avoid the accumulation of energy due to the LPF time lag and due to the nowcasting error. Nevertheless, the accumulation and its costs induced by these non-standard filters still exceed the production cost of e.g. nuclear electricity.<br />
<strong>Below we analyse the smoothing of PV power by means of standard LPF:</strong></p>
<p><img align="center" alt="IPLPF Costs" src="../img/Schema_PLPF.png" /></p>
<p>In the schematic diagram, a PV power plant (PVPP) is connected to the grid and its intermittent PV power p(t) is accumulated or compensated (i.e. smoothed) by an accumulator (BESS). The smoothing power is actuated by a two-way inverter AC/DC and it is given by the ouput signal p(t)-s(t+Δt) of a differencer. Positive sign of the smoothing power is oriented from the grid to BESS. Hence total power superimposed to the grid by PVPP and BESS is determined by the filter’s output signal s(t+Δt).</p>
<ul>
<li>
<p>In case of <strong>LPF</strong> smoothing, the measured signal p(t) would bypass predictor, directly exciting LPF.</p>
</li>
<li>
<p>In theory, the ideal predictive smoothing <strong>IPLPF</strong> would excite LPF by the exact future PV power signal p(t+Δt) where the time advance Δt is absolutely equal to the LPF's group delay at frequencies f&lt;&lt;fc, and fc is the cut-off frequency of LPF. Hence the smooth power signal s(t+Δt) would be the response of LPF to the input signal p(t+Δt).
 on BESS</p>
</li>
<li>
<p>According to the schematic diagram, <strong>PLPF</strong> smoothing method excites LPF by a predicted PV power signal pf(t+Δt).  </p>
</li>
<li>
<p>Eventually, a novel smoothing method <strong>SPLPF</strong> has been designed, exciting the filter by a real predictor like PLPF does, though SPLPF has another schematic diagram.</p>
</li>
</ul>
<h3 id="accumulated-energy-by-smoothing">Accumulated energy by smoothing</h3>
<p>For the simplification of our analysis, PVPP and BESS are single-phase-connected to the grid, and energy losses by the AC/DC conversion and by the accumulation are neglected.<br />
Time course of the accumulated energy by BESS:</p>
<p>
<script type="math/tex; mode=display">SOC(t)=\int_{0}^t (p(\tau)-s(\tau+\Delta t))d\tau\ \ \ \ \ \ \ \ \ (1)</script>
</p>
<p>defines the change of its state-of-charge SOC [Wh] since time=0 until time=t, while SOC may acquire both positive and negative values. The time advance Δt reduces absolute values of the integrated function. Always-positive SOC values can be technically achieved if BESS consists of two separate batteries. The above-defined time advance Δt ensures that following technical criteria are satisfied:<br />
Mean value of SOC is near to zero: <script type="math/tex; mode=display">{1 \over T} \int_{0}^T SOC (t) dt ≈ 0\ \ \ \ \ \ \ \ \ (2)</script>
</p>
<p>Mean quadratic deviation of SOC is near to minimum: <script type="math/tex; mode=display">{1 \over T} \int_{0}^T SOC^2 (t) dt ≈ min\ \ \ \ \ \ \ \ \ (3)</script>
</p>
<p>Hence near-to-minimum required accumulaton capacity per cycle: <script type="math/tex; mode=display">\Delta SOC = max(SOC) – min(SOC) ≈ min\ \ \ \ \ \ \ \ \ (4)</script>
</p>
<p>and near-to-minimum throughput of accumulated energy per cycle: <script type="math/tex; mode=display">{1 \over 2} \int_{0}^T|p(\tau)-s(\tau+\Delta t)|d \tau ≈ min\ \ \ \ \ \ \ \ \ (5)</script>
</p>
<p>The rate of accumulation is expressed by (4) and (5) which are minimized by Δt during a working cycle T = 24 hours (in case of PV energy). The rate of accumulation is also expressed by the power demand during a solar gap. This results from the installed power of PVPP.</p>
<p>Let us assume that PV power is proportional to the global solar irradiance GI [W/m2]. In our experiment, the solar irradiance is intercepted by a plane 20cm x 16cm on the earth’s surface at latitude=48°, longitude=17°, and the plane of incidence is elevated by 47° to the south. Based on the proportionality between the PV power p(t) and the measured GI(t), we substitute the signals p(τ), s(τ+Δt) in (1) by the measured signal GI(t) and by its “predicted-and-smoothed” counterpart. After the substitution, the expression (1) computes the time course of specific accumulated energy GX(t) [Wh/m2] by the filter.</p>
<h3 id="ideal-smoothing-of-pv-power-iplpf">Ideal smoothing of PV power (IPLPF)</h3>
<p>We simulated the operation of ideal predictive PV smoothing (IPLPF) by means of LPF excited by the exact future signal GI(t+Δt) where GI(t) is measured and the time advance Δt (as defined above) eliminates the filter’s time lag. In theory, such a simulated "ex post" smoothing would minimize the accumulation of energy by the filter. Our analysis aims to establish the theoretical potential and affordability of PV smoothing. The numeric experiment is based on the measured solar irradiance over a period of 1 year, assuming contemporary prices of Lithium-Ion accumulators and EDLC supercapacitors.<br />
The measured GI time series eventually allows to calculate the specific accumulator’s capacity [Wh/m2], its specific power [W/m2], specific energy throughput [Wh/m2/day], [Wh/m2/year] requested by the IPLPF smoothing. Based on the accumulators’ specifications and prices as of 2021, the corresponding accumulation costs have been calculated. The simulation proved that the IPLPF is definitely worthwhile with the German power purchase tariff and PV feed-in tariff in 2021. The ideal smoothing costs are substantially lower than the difference between purchase tariff and PV feed-in tariff (assuming that smooth PV infeed partially compensates for the distribution costs). The simulation suggests an affordable smoothing model for a hybrid small-scale PV plant, and foresees a future smoothing technology for large-scale PV plants.  </p>
<h4 id="smoothing-by-iplpf-vs-lpf">Smoothing by IPLPF vs LPF</h4>
<p><strong><em>Global irradiance GI measured (legend meas), filtered GI and specific accumulated energy GX<br />
by LPF (legend lp) and by IPLPF (legend aavg0). Measured @(48.2°N, 17.1°E) by a south-oriented PV panel elevated by 47°, calibrated and operated at the maximum power point of its V-A characteristics:</em></strong><br />
<img alt="PV Logger" src="../img/GI_PV2.3but7.5.2022-04-04.png" style="width: 49%; align='left';" />
<img alt="PV Logger" src="../img/GX_PV2.3but7.5.2022-04-04.png" style="width: 49%; align='right';" /></p>
<p>The left graph shows the measured and low-passed (legend “lp”) GI signals on a day with a high solar exposure and strong intermittency. The graph on the right shows the specific accumulated energy GX [Wh/m2] by IPLPF vs. LPF on the same day. The time course of GX is proportional to the battery's state of charge SOC [Wh]. Exactly-predicted input signal shifts the IPLPF output to the left (legend “aavg0”), minimizing the standard deviation of SOC, thus in practise minimizing the difference delta(SOC) = max(SOC) – min(SOC) which represents the necessary accumulation capacity. The throughput of accumulated energy (other than delta SOC) is also minimized by IPLPF.</p>
<h4 id="costs-of-iplpf-smoothing">Costs of IPLPF smoothing</h4>
<p>The smoothing costs result from the energy accumulation. The accumulation costs are given by the accumulation rate and technology (e.g. Lithium battery, supercapacitor etc.). In theory, the accumulation rate is given by the intermittency of solar irradiance vs. desired time course of the output PV power. The accumulation rate is expressed by following parameters:</p>
<ol>
<li>maximum power [W] from/to BESS, balancing the intermittent PV power</li>
<li>mandated BESS capacity, i.e. maximum delta SOC [Wh] reserved for smoothing</li>
<li>total accumulated energy throughput [Wh] by smoothing</li>
</ol>
<p>In practice, the parameters 2. and 3. are larger the more imperfectly the balancing power between the grid and the battery is controlled. In the illustrated example, IPLPF uses 24% delta SOC relative to LPF, and IPLPF accumulates about 50% of the energy throughput if compared to LPF. Both the accumulated SOC and energy throughput reach their theoretical minimum by means of IPLPF smoothing.<br />
The higher LPF order or its lower cut-off frequency, the smoother output, but "earlier" input signal needed to eliminate the filter's time lag. (In case of PLPF smoothing: The greater Δt, the greater prediction error and the greater rate of accumulation.)<br />
The IPLPF simulation has proven that hybrid PV systems, a small-scale on-grid PV plant having its own battery energy storage system BESS with capacity = 2 hours x Ppvmax, need &lt;10% of their battery capacity to be reserved for smoothing (7% as shown by Illustration 2), while their rest BESS capacity is left for the energy storage. The hybrid PV plants feed their “overflow” power into the grid, as long as the household’s consumption is satisfied and the battery has been charged. <strong>With such a storage capacity and battery power, the IPLPF costs are reasonably lower than the expected added value to the smooth PV power infeed is.</strong>  </p>
<p>IPLPF costs measured from 04/2021 to 03/2022. The plane of incidence and applied LPF are the same as on the graphs GI(t) and GX(t):
<figure markdown>
  <img alt="IPLPF Costs" src="../img/IPLPF_Costs.png" width="650" />
<br />
<figcaption>Table 1</figcaption></p>
</figure>
<h5 id="measurement-conditions">Measurement conditions:</h5>
<p>CapEx of "Hybrid with BESS” system include 90% of the accu-capacity reserved for storage, 10% for smoothing.<br />
Infeed to grid by "Hybrid with BESS” on-grid system: 1/3 of the generated PV energy is assumed as infeed to the grid (overflow).<br />
Li-Ion &amp; supercapacitor (SC): <a href="https://batteryuniversity.com/article/bu-209-how-does-a-supercapacitor-work">life cycle parameters and prices</a> are as of 2021.<br />
Hybrid supercapacitor (HSC): estimated price is based on the relation btw. Li-Ion and SC prices.</p>
<h5 id="cost-calculation">Cost calculation:</h5>
<p>The costs are specific per 1 kW of installed PV power. Installed PV power = DC output power of PV plant (before DC/AC connversion) assuming its solar incidence 1kW/m2 (1 Sun).<br />
CapEx = initial investment to PV smoothing. OpEx = regular (e.g. yearly) costs necessary for its uninterrupted function. The greater from (CapEx, interval * OpEx) defines the cost of PV smoothing for a given service interval. However, when the smoothing uses &gt;1 accumulation technologies concurrently, the service interval has to be fixed before calculating OpEx. (Reason: Given the service interval, two technologies with different wear-outs can be optimally mixed.) Hybrid systems and sole PV plants use different cost models, because the sole PV plant uses a mixed accumulation technology for smoothing. Energy losses due to the AC/DC conversion and accumulation were neglected.</p>
<h4 id="applications-of-iplpf">Applications of IPLPF</h4>
<p>Small-scale hybrid PV system configuration: Installed PV power &lt;10kW connected to the low-voltage grid, installed BESS with energy capacity ≈ 2h x installed power [W]. After charging the BESS to its threshold SOC (e.g. 90%), the BESS can smooth the PV infeed (overflow) to the grid for affordable costs, if the rest of BESS capacity is left free for IPLPF operation, and its full power is available for smoothing (additional technical measures are needed to avoid its microcycling). The power intermittency of small scale PV plants has no impact on the grid, unless their penetration in the grid is high. <strong>IPLPF technology offers an affordable smoothing of PV power in the grid areas with high penetration of small-scale hybrid PV systems.</strong></p>
<p>Lithium accumulators are cheap, efficient and fast, but not enough powerful for a sole IPLPF smoothing. It is not recommended to charge/draw a Li-Ion battery with relative power (PPVmax x 1h)/SOCmax &gt;&gt; 1, otherwise the battery’s life cycle would be curtailed. It is cheaper to oversize its SOC capacity appropriately, than to overload it by too much power.</p>
<p>Large-scale PV plant without BESS: Installed power &gt;100 kW is connected to the grid on a middle- or high-voltage level. Water pumps provide efficient storage for large scale PV plants (cheaper and cleaner than corresponding BESS would provide), but no power smoothing because the water pumps are too sluggish for such a task. Large-scale PV intermittency can be “smoothed” bywith a reasonably low SOC capacity driven by IPLPF technology. A solely smoothing battery with a relatively low capacity delta(SOC) would have to provide a high relative power ≈10C. Such a high power can be provided by EDLC supercapacitors (SC), but on contrary, these still do not provide enough cheap capacity to satisfy the IPLPF smoothing. Currently there is a lack of accumulation technology suitable for smoothing the large-scale PV plants.</p>
<p><strong>IPLPF smoothing with hybrid supercapacitors (future):</strong><br />
Since the IPLPF smoothing shrinks the necessary delta(SOC) and total throughput to their theoretical minimum, by contrast it increases the relative smoothing power, as no algorithm can supply the missing PV power when the direct Sun beams are covered by clouds. The measured signal GI(t) defines specific accumulation parameters GXmax [Wh/m^2] and GImax [W/m^2] needed by the IPLPF smoothing. Their values lay somewhere between those values provided by the RedOx Li-Ion and EDLC supercap technologies. We have optimized the IPLPF smoothing of the large-scale sole PV plant by mixing both SC and HSC technologies to concurrently operate during 15 years of service. The future HSC technology is already being developed: hybrid supercapacitor, combining advantages of EDLC &amp; RedOx technologies.</p>
<h4 id="iplpf-summary">IPLPF summary</h4>
<p>Our measurement has proved, that ideal PV smoothing can be affordable with the current Lithium-Ion technology - if properly implemented into a hybrid PV plant (incl. measures against micro-cycling of battery). Although the HSC technology is yet unavailable, the intensive seek for energy makes it very likely to be soon mature as well for large-scale PV plants. <strong>Low accumulation rate by the IPLPF smoothing should motivate the further development of technologies among which the accurate nowcasting of PV power and the smart filtering of PV power are crucial.</strong></p>
<h3 id="real-smoothing-of-pv-power">Real smoothing of PV power</h3>
<p>The measured global irradiance signal GI(t) allows not only the simulation of ideal predictive low-pass smoothing (IPLPF), but also allows for the predictive smoothing of PV power (PLPF), exciting a low-pass filter (LPF) by a  real predicted signal GIf(t+Δt). The values GIf are biased by a prediction error. As we will show, this error induces a significant accumulation of energy by PLPF, if compared to IPLPF. We  simulated the prediction error to the measured GI signal in order to statistically represent the real predicted signal GIf(t+Δt). Based on the measured time series GI(t), the "ex-post" simulation of PLPF allowed us to empirically analyze its smoothing performance and energy accumulation.<br />
In addition to PLPF, we have developed a “smart predictive low-pass smoothing” method (patent pending SPLPF), minimizing the accumulated energy with respect to the real-predicted values GIf exciting the LPF. Finally, we have analysed the performance of four different PV smoothing methods:</p>
<ol>
<li>LPF: Input of LPF is excited by the measured signal GI(t)</li>
<li>IPLPF: Input of LPF is excited by the measured, optimally left-shifted signal GI(t+Δt)</li>
<li>PLPF: Input of LPF is excited by the simulated-predicted signal GIf(t+Δt)</li>
<li>SPLPF: Power filter is excited by the simulated-predicted signal GIf.</li>
</ol>
<h4 id="simulation-of-predicted-pv-power">Simulation of predicted PV power</h4>
<p>We simulated the predicted signal GIf(t+Δt) from the measured, left-shifted GI signal by interval Δt, by smoothing its future portion and by superimposing a random error to its values with respect to the fundamental properties of PV predictors:</p>
<ul>
<li>as the advance Δt increases, the (unwanted) smoothing of the predicted signal GIF strengthens,</li>
<li>as the advance Δt increases, the impact of  random error on GIF increases (statistically cumulates).</li>
</ul>
<p>Both errors are applied at the "future" time t+Δt, whereas Δt depends on the requested smoothing quality and LPF order. In the simulation, we control the prediction error by 2 quantitative (OLAP) dimensions:</p>
<ul>
<li>Interval of prediction, after which the smoothing impact on the predicted signal is strengthened, is defined by the parameter smooth_int [minute]. The shorter this interval, the steeper the effect of smoothing rises towards future.</li>
<li>Standard deviation of the random prediction error (dimensionless parameter SE). A new random value is repeatedly superimposed to the future GI signal each time after passing a 6-minute interval of prediction. This assures that the random error statistically cumulates.</li>
</ul>
<p>GI predictors with two different accuracies have been simulated:</p>
<ul>
<li>“Better prediction accuracy”: smooth_int = 6 minutes, SE = 0.05</li>
<li>"Worse prediction accuracy": smooth_int = 3 minutets, SE = 0.1.</li>
</ul>
<p>For each method, the quality of PV power smoothing and the rate of energy accumulation were analysed by the LPF of orders 1 to 4. Filters of different orders were tuned in order to generate PV power of an equivalent smoothing quality, provided that the filters of different orders are excited by the measured, optimally shifted input signal (as in IPLPF case). By adhering this tuning rule, increasing of the filter order increases its cut-off frequency, while the optimal advance Δt increases only slightly.<br />
The smoothing of PV power during a day with strong solar intermittency was analysed by the following 4 methods:
The smoothing of PV power by the above-listed methods is numerically analysed and graphically displayed. The prediction error (Figure 2, Figure 6) empirically exhibits the following dependencies along the partial OLAP dimensions:</p>
<h4 id="smoothing-analyzed-by-prediction-error">Smoothing analyzed by prediction error</h4>
<p>Smoothing of the predicted signal:</p>
<ul>
<li>Changing the value of smooth_int affects the power smoothing quality neither by SPLPF nor by PLPF method, wile for all parameter values, the SPLPF method provides worse smoothing than the PLPF method (Figure 3, Figure 4, Figure 7, Figure 8).</li>
<li>Lowering the value of smooth_int dramatically increases the accumulation rate by the PLPF method, which is always much larger than by SPLPF method (Figure 5, Figure 9). For some parameter values, the PLPF method even exceeds the accumulation rate induced by the LPF method (Figure 9). In the SPLPF method, the accumulation rate increases only slightly and much more slowly than in the PLPF method.</li>
</ul>
<p>Random error of prediction:</p>
<ul>
<li>Increasing of SE parameter does not degrade the smoothing quality by the PLPF method, but it does degrade the smoothing by the SPLPF method (check Figure 7 vs Figure 8), in which the smoothing performance with standard error SE &gt; 0 is always worse than in the PLPF method.</li>
<li>Increasing the value of SE parameter significantly increases the accumulation rate by the PLPF method (Figure 5, Figure 9), which is for all values SE &gt; 0 much higher than by the SPLPF method. For some SE values, the PLPF method even exceeds the LPF method in its accumulation rate. The accumulation rate increases only slightly in the SPLPF method, and less so the higher the filter order.</li>
</ul>
<h4 id="smoothing-analyzed-by-lpf-order">Smoothing analyzed by LPF order</h4>
<p>Filter order is the third OLAP dimension, impact of which was analysed together with the prediction error. We analysed the LPF orders 1 to 4:</p>
<ul>
<li>Filter order does not affect the smoothing quality of PLPF method and for small filter orders, the smoothing quality of PLPF is better than that of SPLPF.</li>
<li>Increasing of the filter order improves the smoothing quality of SPLPF method, which becomes technically equivalent with PLPF from the 4th order onwards.</li>
<li>Increasing of the filter order only slightly reduces the accumulation rate by the PLPF method. The accumulation rate by PLPF is always substantially larger than by SPLPF.</li>
<li>Increasing of the filter order appreciably reduces the accumulation rate by the SPLPF method. By increasing the filter order with a relatively small prediction error, SPLPF gradually converges to the accumulation rate induced by the IPLPF method.</li>
</ul>
<p>The signal GI(t) is graphically displayed as measured, predicted, and smoothed by 4 different smoothing methods. Finally, a per-day time course of the specific accumulated energy GX [Wh/m2] is displayed, corresponding to the corresponding smoothing method. Performance of the 3rd-order low-pass filter is displayed by the graphs. Two days with strong solar intermittency have been selected for the simulation: A day with the medium solar exposure 3.0 kWh/m2, and a day with the high solar exposure 5.9 kWh/m2. (GI was measured at the above-specified plane of incidence.) Advance Δt = 30 minutes was applied in order to achieve a desired smoothing effect on both selected days. The accumulation rate by the 4 different smoothing methods was calculated, based on the measured GI(t) signal. The results are summarized in Table 2 and Table 3: In the column "Δ GX", a difference between the maximum and minimum specific accumulated energy is calculated by the expression (4). In the column "Throughput", a total daily flow of the specific energy through the accumulator is calculated by (5). For the comparison, a daily specific global exposure at the plane of incidence is  displayed too.</p>
<h4 id="accumulated-energy-by-smoothing_1">Accumulated energy by smoothing</h4>
<figure>
<p><img alt="IPLPF Costs" src="../img/Accu_Rate_220304.png" width="650" />
  </p>
<figcaption>Table 2</figcaption>
</figure>
<p>.  </p>
<figure>
<p><img alt="IPLPF Costs" src="../img/Accu_Rate_220404.png" width="650" />
  </p>
<figcaption>Table 3</figcaption>
</figure>
<p>With "better GI prediction accuracy", the SPLPF smoothing required 21% - 22% of the BESS energy capacity (Δ GX) used by the LPF method during the selected days, or 24% - 41% of the capacity used by the PLPF method. SPLPF eventually required 1.0 - 1.2 times the energy capacity used by the IPLPF method. The SPLPF smoothing put 58% - 73% of the energy flow through the accumulator relative to the LPF method, or 75% - 83% of the energy throughput by the PLPF method. SPLPF eventually put 1.0 - 1.1 times more energy through BESS than the IPLPF method.</p>
<p>With "worse GI prediction accuracy", the SPLPF smoothing required 24% - 33% of the BESS energy capacity (Δ GX) used by the LPF method during the selected days, or 19% - 28% of the capacity used by the PLPF method. SPLPF eventually required 1.2 - 1.8 times the energy capacity used by the IPLPF method. The SPLPF method put 59% - 77% of the daily energy flow through the accumulator relative to the LPF method, or 63% - 69% of the energy throughput by the PLPF method. SPLPF eventually put 1.0 - 1.1 times more  energy through BESS than the IPLPF method.</p>
<h4 id="graphical-display">Graphical display</h4>
<p>For illustration, 3 graph types are displayed by graphs:</p>
<ul>
<li>Measured GI, synchronized with predicted GIf</li>
<li>Measured GI and its smooth equivalent by different smoothing methods</li>
<li>Accumulated GX by different smoothing methods</li>
</ul>
<p>The displayed signals are based on the solar measurement from 2 days:</p>
<p><strong>2022-03-04: Medium solar exposure with strong solar intermittency:</strong></p>
<figure>
<p><img alt="IPLPF Costs" src="../img/2022-03-04_from11h_to12h.png" width="650" />
  </p>
<figcaption>Figure 2: Measured GI synchronized with GIF (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy)</figcaption>
</figure>
<figure>
<p><img alt="IPLPF Costs" src="../img/se0.05_6min_2022-03-04.png" width="650" />
  </p>
<figcaption>Figure 3: Measured and smoothed GI by 4 different methods, with better prediction accuracy</figcaption>
</figure>
<figure>
<p><img alt="IPLPF Costs" src="../img/se0.1_3min_2022-03-04.png" width="650" />
  </p>
<figcaption>Figure 4: Measured and smoothed GI by 4 different methods, with worse prediction accuracy</figcaption>
</figure>
<figure>
<p><img alt="IPLPF Costs" src="../img/sim24_2022-03-04.png" width="650" />
  </p>
<figcaption>Figure 5: Time course of GX accumulated by 4 different smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy)</figcaption>
</figure>
<p>.<br />
<strong>2022-04-04: High solar exposure with strong solar intermittency:</strong></p>
<figure>
<p><img alt="IPLPF Costs" src="../img/2022-04-04_from11h_to12h.png" width="650" />
  </p>
<figcaption>Figure 6: Measured GI synchronized with GIF (predicted 30 minutes ago) between 11:00 and 12:00. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy)</figcaption>
</figure>
<figure>
<p><img alt="IPLPF Costs" src="../img/se0.05_6min_2022-04-04.png" width="650" />
  </p>
<figcaption>Figure 7: Measured and smoothed GI by 4 different methods, with better prediction accuracy</figcaption>
</figure>
<figure>
<p><img alt="IPLPF Costs" src="../img/se0.1_3min_2022-04-04.png" width="650" />
  </p>
<figcaption>Figure 8: Measured and smoothed GI by 4 different methods, with worse prediction accuracy</figcaption>
</figure>
<figure>
<p><img alt="IPLPF Costs" src="../img/sim24_2022-04-04.png" width="650" />
  </p>
<figcaption>Figure 9: Time course of GX accumulated by 4 different smoothing methods. (Lo Err: better prediction accuracy, Hi Err: worse prediction accuracy)</figcaption>
</figure>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
